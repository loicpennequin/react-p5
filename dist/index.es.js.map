{"version":3,"file":"index.es.js","sources":["../src/Command.jsx","../src/utils/handleValueOrFunction.js","../src/utils/handleCommonProps.js","../src/PushPop.jsx","../src/Debug.jsx","../src/RenderContext.jsx","../src/P5.jsx","../src/Layer.jsx","../src/Mask.jsx","../src/Canvas.jsx","../src/shapes/Rectangle.jsx","../src/LinearGradient.jsx","../src/Body.jsx","../src/shapes/Arc.jsx","../src/shapes/Background.jsx","../src/shapes/Circle.jsx","../src/shapes/Ellipse.jsx","../src/shapes/Line.jsx","../src/shapes/Point.jsx","../src/shapes/Square.jsx"],"sourcesContent":["import { useContext, useRef, useEffect } from 'react';\r\nimport { P5RenderContext } from './RenderContext';\r\n\r\nexport const Command = ({ command, p }) => {\r\n    const renderContext = useContext(P5RenderContext);\r\n    const commandIndex = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const clear = renderContext.defineCommand(\r\n            command,\r\n            () => p || renderContext.p5Instance,\r\n            commandIndex.current\r\n        );\r\n        return () => {\r\n            commandIndex.current = clear();\r\n        };\r\n    }, [command, p, renderContext]);\r\n    return null;\r\n};\r\n","export const handleValueOrFunction = (p, ...values) => {\r\n    const returnValue = values.map(value =>\r\n        typeof value === 'function' ? value(p) : value\r\n    );\r\n\r\n    if (returnValue.length <= 1) return returnValue[0];\r\n    return returnValue;\r\n};\r\n","import { handleValueOrFunction } from './handleValueOrFunction';\r\n\r\nexport function handleCommonProps(props, p) {\r\n    const applyProp = propName => {\r\n        if (!props.hasOwnProperty(propName)) return;\r\n        const value = handleValueOrFunction(p, props[propName]);\r\n\r\n        if (Array.isArray(value)) p[propName](...value);\r\n        else p[propName](value);\r\n    };\r\n\r\n    if (props.noFill) p.noFill();\r\n    if (props.noStroke) p.noStroke();\r\n\r\n    applyProp('ellipseMode');\r\n    applyProp('rectMode');\r\n    applyProp('angleMode');\r\n    applyProp('colorMode');\r\n\r\n    applyProp('fill');\r\n    applyProp('stroke');\r\n\r\n    applyProp('strokeJoin');\r\n    applyProp('strokeCap');\r\n    applyProp('strokeWeight');\r\n\r\n    applyProp('translate');\r\n    applyProp('rotate');\r\n    applyProp('scale');\r\n    applyProp('shearX');\r\n    applyProp('shearY');\r\n    applyProp('applyMatrix');\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from './Command';\r\nimport { handleCommonProps } from './utils/handleCommonProps';\r\n\r\nexport function PushPop({ children, ...props }) {\r\n    const push = useCallback(\r\n        p => {\r\n            p.push();\r\n            handleCommonProps(props, p);\r\n        },\r\n        [props]\r\n    );\r\n\r\n    const pop = useCallback(p => {\r\n        p.pop();\r\n    }, []);\r\n    return (\r\n        <>\r\n            <Command command={push} />\r\n            {children}\r\n            <Command command={pop} />\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback, useContext, useRef } from 'react';\r\nimport { P5Context } from './P5';\r\nimport { Command } from './Command';\r\nimport { PushPop } from './PushPop';\r\n\r\nexport function Debug() {\r\n    const ctx = useContext(P5Context);\r\n    const frameRateHistory = useRef([]);\r\n\r\n    const displayDebugInfo = useCallback(\r\n        p => {\r\n            p.fill(0, 80);\r\n            p.noStroke();\r\n            p.rect(0, 0, 185, 95);\r\n\r\n            p.fill(255);\r\n            p.textFont('Courier');\r\n            p.textLeading(20);\r\n            const fr = Math.round(p.frameRate());\r\n            const avgFr =\r\n                frameRateHistory.current.reduce(\r\n                    (total, curr) => total + curr,\r\n                    0\r\n                ) / frameRateHistory.current.length;\r\n            frameRateHistory.current.push(fr);\r\n            if (fr > 200) fr.shift();\r\n            const text = `Current frame rate: ${fr}\r\nAverage frame rate: ${Math.round(avgFr)}\r\nSetup commands: ${ctx.getCommands().setup.length}\r\nDraw commands: ${ctx.getCommands().draw.length}\r\n        `;\r\n            p.text(text, 8, 18);\r\n        },\r\n        [ctx]\r\n    );\r\n\r\n    return (\r\n        <PushPop>\r\n            <Command command={displayDebugInfo} />\r\n        </PushPop>\r\n    );\r\n}\r\n","import React, { createContext, useContext } from 'react';\r\nimport { Debug } from './Debug';\r\nimport { SETUP, DRAW, P5Context } from './P5';\r\nexport const P5RenderContext = createContext(null);\r\n\r\nexport const RenderContextProvider = ({ step, children }) => {\r\n    const { p5Instance, defineCommandFactory, getOptions } = useContext(\r\n        P5Context\r\n    );\r\n    const api = {\r\n        defineCommand: defineCommandFactory(step),\r\n        rootP5Instance: p5Instance,\r\n        p5Instance,\r\n        getOptions,\r\n    };\r\n\r\n    if (!p5Instance) return null;\r\n\r\n    return (\r\n        <P5RenderContext.Provider value={api}>\r\n            {children}\r\n        </P5RenderContext.Provider>\r\n    );\r\n};\r\n\r\nexport const Setup = ({ children }) => {\r\n    return (\r\n        <RenderContextProvider step={SETUP}>{children}</RenderContextProvider>\r\n    );\r\n};\r\nexport const Draw = ({ children }) => {\r\n    const { getOptions } = useContext(P5Context);\r\n    return (\r\n        <RenderContextProvider step={DRAW}>\r\n            {children}\r\n            {getOptions().debug && <Debug />}\r\n        </RenderContextProvider>\r\n    );\r\n};\r\n","import React, {\r\n    useRef,\r\n    useMemo,\r\n    useState,\r\n    useEffect,\r\n    createContext,\r\n    useContext,\r\n} from 'react';\r\nimport p5 from 'p5';\r\nimport { P5RenderContext } from './RenderContext';\r\n\r\np5.disableFriendlyErrors = true;\r\nexport const SETUP = 'setup';\r\nexport const DRAW = 'draw';\r\nexport const PRELOAD = 'preload';\r\n\r\nexport const P5Context = createContext(null);\r\n\r\nexport const useP5 = () => {\r\n    const context = useContext(P5RenderContext);\r\n    return {\r\n        p: context.p5Instance,\r\n        root: context.rootP5Instance,\r\n        draw: context.defineCommand,\r\n    };\r\n};\r\n\r\nexport const useDraw = command => {\r\n    const { draw } = useP5();\r\n\r\n    useEffect(() => {\r\n        const clear = draw(command);\r\n        return () => clear();\r\n    }, [draw, command]);\r\n};\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    clearOnDraw: false,\r\n    frameRate: 60,\r\n    debug: false,\r\n};\r\n\r\nexport const P5 = ({ options, children, ...props }) => {\r\n    const [p5Instance, setP5Instance] = useState(null);\r\n    const __ready = useRef(false);\r\n    const canvasOptions = useMemo(() => ({ ...DEFAULT_OPTIONS, ...options }), [\r\n        options,\r\n    ]);\r\n    const commands = useRef({\r\n        [SETUP]: [],\r\n        [DRAW]: [],\r\n        [PRELOAD]: [],\r\n    });\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (p5Instance) p5Instance.remove();\r\n        };\r\n    }, [p5Instance]);\r\n\r\n    useEffect(() => {\r\n        if (!p5Instance) {\r\n            setP5Instance(\r\n                new p5(p => {\r\n                    p.__id = 'ROOT';\r\n\r\n                    p.setup = () => {\r\n                        p.frameRate(canvasOptions.frameRate);\r\n                        // Basically I don't understand why I need to do this...\r\n                        // When Loading the component containing the sketch asynchronously via React.lazy(),\r\n                        // the setup function is executed before the <Commands /> inside <Setup /> had time to define the commands\r\n                        // There is probably a better workaround, but this will do for now...\r\n                        setTimeout(() => {\r\n                            commands.current[SETUP].forEach(command =>\r\n                                command()\r\n                            );\r\n                            __ready.current = true;\r\n                        });\r\n                    };\r\n\r\n                    p.draw = () => {\r\n                        if (__ready.current !== true) return;\r\n                        if (canvasOptions.clearOnDraw) {\r\n                            p.clear();\r\n                        }\r\n                        commands.current[DRAW].forEach(command => {\r\n                            command();\r\n                        });\r\n                    };\r\n                })\r\n            );\r\n        }\r\n    }, [canvasOptions.clearOnDraw, canvasOptions.frameRate, p5Instance]);\r\n\r\n    const api = {\r\n        p5Instance,\r\n        getOptions: () => canvasOptions,\r\n        getCommands: () => commands.current,\r\n        defineCommandFactory: key => (command, ctx = p5Instance, idx) => {\r\n            if (typeof idx !== 'number') {\r\n                idx = commands.current[key].length;\r\n            }\r\n\r\n            const handler = () => {\r\n                return command(typeof ctx === 'function' ? ctx() : ctx);\r\n            };\r\n            handler.__type = command.__type;\r\n            if (commands.current[key].length <= 0) {\r\n                commands.current[key].push(handler);\r\n            } else {\r\n                commands.current[key].splice(idx, 0, handler);\r\n            }\r\n            return () => {\r\n                const index = commands.current[key].indexOf(handler);\r\n                commands.current[key] = commands.current[key].filter(\r\n                    c => c !== handler\r\n                );\r\n                return index;\r\n            };\r\n        },\r\n    };\r\n\r\n    return <P5Context.Provider value={api}>{children}</P5Context.Provider>;\r\n};\r\n","import React, {\r\n    useState,\r\n    useEffect,\r\n    useRef,\r\n    useContext,\r\n    useCallback,\r\n} from 'react';\r\nimport { Command } from './Command';\r\nimport { P5RenderContext } from './RenderContext';\r\nimport { handleValueOrFunction } from './utils/handleValueOrFunction';\r\nconst EMPTY_ARRAY = Object.freeze([]);\r\n\r\nexport function Layer({\r\n    autoClear = true,\r\n    children = null,\r\n    blendMode = 'BLEND',\r\n    opacity,\r\n    filters = EMPTY_ARRAY,\r\n    isStatic = false,\r\n    applyFunction,\r\n    x = 0,\r\n    y = 0,\r\n    width = p => p.width,\r\n    height = p => p.height,\r\n    id,\r\n}) {\r\n    const [layerImage, setLayerImage] = useState(null);\r\n    const pg = useRef(null);\r\n    const applyCallbacks = useRef([]);\r\n    const ctx = useContext(P5RenderContext);\r\n\r\n    useEffect(() => {\r\n        if (isStatic) {\r\n            setLayerImage(null);\r\n        }\r\n    }, [children, opacity, blendMode, isStatic]);\r\n\r\n    const api = {\r\n        ...ctx,\r\n        get p5Instance() {\r\n            return pg.current;\r\n        },\r\n    };\r\n\r\n    const applyLayer = useCallback(() => {\r\n        const p = ctx.p5Instance;\r\n        const doApply = content => {\r\n            p.blendMode(p[blendMode]);\r\n            // only tint if needed because it is a costly operation\r\n            if (opacity) {\r\n                p.tint(255, opacity);\r\n            }\r\n            p.image(\r\n                content,\r\n                handleValueOrFunction(p, x),\r\n                handleValueOrFunction(p, y),\r\n                handleValueOrFunction(p, width),\r\n                handleValueOrFunction(p, height)\r\n            );\r\n        };\r\n\r\n        if (layerImage && isStatic) {\r\n            doApply(layerImage);\r\n            return;\r\n        }\r\n        if (!pg.current || pg.current.width <= 0 || pg.current.height <= 0) {\r\n            return;\r\n        }\r\n\r\n        pg.current.mouseX = p.mouseX + handleValueOrFunction(p, x);\r\n        pg.current.mouseY = p.mouseY + handleValueOrFunction(p, y);\r\n\r\n        let contentToApply = pg.current;\r\n\r\n        if (applyCallbacks.current.length > 0) {\r\n            const copyParams = [0, 0, pg.current.width, pg.current.height];\r\n            contentToApply = p.createImage(pg.current.width, pg.current.height);\r\n            contentToApply.copy(pg.current, ...copyParams, ...copyParams);\r\n            applyCallbacks.current.forEach(cb =>\r\n                cb(pg.current, contentToApply)\r\n            );\r\n        }\r\n\r\n        if (applyFunction) applyFunction(pg.current);\r\n        else doApply(contentToApply);\r\n\r\n        if (isStatic) {\r\n            setLayerImage(contentToApply);\r\n        }\r\n    }, [\r\n        ctx.p5Instance,\r\n        layerImage,\r\n        isStatic,\r\n        applyFunction,\r\n        blendMode,\r\n        opacity,\r\n        x,\r\n        y,\r\n        width,\r\n        height,\r\n    ]);\r\n\r\n    const applyFilters = useCallback(() => {\r\n        if (!pg.current) return;\r\n        filters.forEach(filter => {\r\n            if (Array.isArray(filter)) {\r\n                pg.current.filter(...filter);\r\n            } else {\r\n                pg.current.filter(filter);\r\n            }\r\n        });\r\n    }, [filters]);\r\n\r\n    const applyAutoClear = useCallback(() => {\r\n        if (!pg.current) return;\r\n        pg.current.clear();\r\n    }, []);\r\n\r\n    const createLayer = useCallback(\r\n        p => {\r\n            if (!pg.current) {\r\n                pg.current = ctx.rootP5Instance.createGraphics(\r\n                    handleValueOrFunction(ctx.rootP5Instance, width),\r\n                    handleValueOrFunction(ctx.rootP5Instance, height)\r\n                );\r\n                pg.current.on = (event, cb) => {\r\n                    switch (event) {\r\n                        case 'apply':\r\n                            applyCallbacks.current.push(cb);\r\n                            return () => {\r\n                                applyCallbacks.current.splice(\r\n                                    applyCallbacks.current.indexOf(cb),\r\n                                    1\r\n                                );\r\n                            };\r\n                        default:\r\n                            console.error('Unknow layer event', event);\r\n                    }\r\n                };\r\n            }\r\n            pg.current.__isLayer = true;\r\n            pg.current.__id = id;\r\n        },\r\n        [ctx.rootP5Instance, height, id, width]\r\n    );\r\n\r\n    return (\r\n        <P5RenderContext.Provider value={api}>\r\n            <>\r\n                {!layerImage && <Command command={createLayer} />}\r\n                {!layerImage && autoClear && (\r\n                    <Command command={applyAutoClear} />\r\n                )}\r\n                {!layerImage && children}\r\n                {!layerImage && filters.length > 0 && (\r\n                    <Command command={applyFilters} />\r\n                )}\r\n                <Command command={applyLayer} />\r\n            </>\r\n        </P5RenderContext.Provider>\r\n    );\r\n}\r\n","import React, { useRef, useCallback, useContext } from 'react';\r\nimport { P5RenderContext } from './RenderContext';\r\nimport { Layer } from './Layer';\r\n\r\nexport function Mask({ id, children, ...props }) {\r\n    const ctx = useContext(P5RenderContext);\r\n    const mask = useRef(null);\r\n\r\n    const applyFunction = useCallback(\r\n        layer => {\r\n            const apply = (parentLayer, parentImg) => {\r\n                parentImg.mask(layer);\r\n            };\r\n            if (mask.current) mask.current();\r\n            mask.current = ctx.p5Instance.on('apply', apply);\r\n        },\r\n        [ctx.p5Instance]\r\n    );\r\n\r\n    return (\r\n        <Layer id={id} applyFunction={applyFunction} {...props}>\r\n            {children}\r\n        </Layer>\r\n    );\r\n}\r\n","import React, { useRef, useCallback, useContext } from 'react';\r\nimport { Command } from './Command';\r\nimport { P5RenderContext } from './RenderContext';\r\n\r\nexport function Canvas({\r\n    width,\r\n    height,\r\n    renderer = 'P2D',\r\n    children,\r\n    ...props\r\n}) {\r\n    const { rootP5Instance: rp } = useContext(P5RenderContext);\r\n    const canvasContainerRef = useRef(null);\r\n    const command = useCallback(() => {\r\n        const canvas = rp.createCanvas(width, height, renderer);\r\n        console.log('create canvas');\r\n        canvas.parent(canvasContainerRef.current);\r\n    }, [height, renderer, rp, width]);\r\n\r\n    return (\r\n        <>\r\n            <div ref={canvasContainerRef} {...props} />\r\n            <Command command={command}>{children}</Command>\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Rectangle({ p, x, y, width, height, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.rect(...handleValueOrFunction(p, x, y, width, height));\r\n        },\r\n        [props, x, y, width, height]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback, useContext } from 'react';\r\nimport { Command } from './Command';\r\nimport { P5RenderContext } from './RenderContext';\r\nimport { Rectangle } from './shapes/Rectangle';\r\nimport { PushPop } from './PushPop';\r\nimport { handleCommonProps } from './utils/handleCommonProps';\r\nimport { handleValueOrFunction } from './utils/handleValueOrFunction';\r\nimport p5 from 'p5';\r\n\r\nconst FullCanvasRectangle = () => (\r\n    <Rectangle\r\n        x={0}\r\n        y={0}\r\n        width={p => p.width}\r\n        height={p => p.height}\r\n        noStroke\r\n    />\r\n);\r\nexport function LinearGradient({\r\n    x = 0,\r\n    y = 0,\r\n    width,\r\n    height,\r\n    colors = ['black', 'white'],\r\n    angle,\r\n    angleMode,\r\n    children,\r\n    ...props\r\n}) {\r\n    const { rootP5Instance: rp } = useContext(P5RenderContext);\r\n\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            const params = {\r\n                x: handleValueOrFunction(rp, x),\r\n                y: handleValueOrFunction(rp, y),\r\n                width: handleValueOrFunction(rp, width) || p.width,\r\n                height: handleValueOrFunction(rp, height) || p.height,\r\n                angle: handleValueOrFunction(rp, angle) || 0,\r\n                angleMode: handleValueOrFunction(rp, angleMode) || p.RADIANS,\r\n                colors: handleValueOrFunction(rp, ...colors),\r\n            };\r\n\r\n            if (params.angleMode !== p.RADIANS) {\r\n                params.angle = p.radians(params.angle);\r\n            }\r\n            p.push();\r\n            p.angleMode(p.DEGREES);\r\n            let angleInDegrees = p.degrees(params.angle) % 360;\r\n            let endVectorAngle = p.degrees(params.angle) % 180;\r\n\r\n            if (endVectorAngle > 45 && endVectorAngle <= 90) {\r\n                endVectorAngle = 90 - endVectorAngle;\r\n            } else if (endVectorAngle > 90 && endVectorAngle <= 135) {\r\n                endVectorAngle -= 90;\r\n            } else if (endVectorAngle > 135 && endVectorAngle <= 180) {\r\n                endVectorAngle = 90 - (endVectorAngle - 90);\r\n            }\r\n\r\n            const startVector = p.createVector(params.x, params.y);\r\n            const endVector = p5.Vector.fromAngle(params.angle);\r\n\r\n            endVector.setMag(params.width / p.sin(90 - endVectorAngle));\r\n            if (angleInDegrees > 270) {\r\n                startVector.y += params.height;\r\n                endVector.y += params.height;\r\n            } else if (angleInDegrees > 180) {\r\n                startVector.x += params.width;\r\n                endVector.x += params.width;\r\n                startVector.y += params.height;\r\n                endVector.y += params.height;\r\n            } else if (angleInDegrees > 90) {\r\n                startVector.x += params.width;\r\n                endVector.x += params.width;\r\n            }\r\n            p.pop();\r\n            const gradient = p.drawingContext.createLinearGradient(\r\n                startVector.x,\r\n                startVector.y,\r\n                params.x + endVector.x,\r\n                params.y + endVector.y\r\n            );\r\n            params.colors.forEach((color, i) => {\r\n                const stop = i / (params.colors.length - 1);\r\n                gradient.addColorStop(stop, p.color(color).toString());\r\n            });\r\n            p.drawingContext.fillStyle = gradient;\r\n\r\n            // UNCOMMENT TO DEBUG\r\n            // p.push();\r\n            // p.rect(0, 0, p.width, p.height);\r\n            // p.fill(0);\r\n            // p.text(`angle: ${Math.round(p.degrees(params.angle))}`, 15, 15);\r\n            // p.noFill();\r\n            // p.stroke(128);\r\n            // p.rect(params.x, params.y, params.width, params.height);\r\n            // p.rectMode(p.CORNERS);\r\n            // p.stroke(255);\r\n            // p.line(\r\n            //     startVector.x,\r\n            //     startVector.y,\r\n            //     params.x + endVector.x,\r\n            //     params.y + endVector.y\r\n            // );\r\n            // p.pop();\r\n        },\r\n        [props, rp, x, y, width, height, angle, angleMode, colors]\r\n    );\r\n\r\n    return (\r\n        <PushPop>\r\n            <Command command={command} />\r\n            {children || <FullCanvasRectangle />}\r\n        </PushPop>\r\n    );\r\n}\r\n","import React, { useRef, useState, useEffect, useCallback } from 'react';\r\nimport { Command } from './Command';\r\nimport { useP5 } from './P5';\r\n\r\nexport function Body({ model, children }) {\r\n    const { p } = useP5();\r\n    const _model = useRef(null);\r\n    const [objectState, setObjectState] = useState(null);\r\n\r\n    const command = useCallback(\r\n        p => {\r\n            if (objectState) {\r\n                _model.current.update(p);\r\n                setObjectState({ state: _model.current });\r\n            }\r\n        },\r\n        [objectState]\r\n    );\r\n\r\n    useEffect(() => {\r\n        // We need to wait for the next tick before initializing the model\r\n        // This is because it could happend that setup commands such as createCanvas have not been run yet, potentially forwarding wrong values into the model\r\n        if (!_model.current) {\r\n            setTimeout(() => {\r\n                _model.current = model(p, _model.current);\r\n                setObjectState({ state: _model.current });\r\n            });\r\n        } else {\r\n            _model.current = model(p, _model.current);\r\n            setObjectState({ state: _model.current });\r\n        }\r\n    }, [model, p]);\r\n\r\n    return (\r\n        <>\r\n            <Command command={command}></Command>\r\n            {objectState && children(objectState.state)}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Arc({\r\n    p,\r\n    x,\r\n    y,\r\n    height,\r\n    width,\r\n    start,\r\n    stop,\r\n    children,\r\n    ...props\r\n}) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.arc(\r\n                ...handleValueOrFunction(p, x, y, width, height, start, stop)\r\n            );\r\n        },\r\n        [props, x, y, width, height, start, stop]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Background({ color, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            p.background(handleValueOrFunction(p, color));\r\n        },\r\n        [color]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Circle({ p, x, y, size, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.circle(...handleValueOrFunction(p, x, y, size));\r\n        },\r\n        [props, x, y, size]\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Ellipse({ p, x, y, width, height, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.ellipse(...handleValueOrFunction(p, x, y, width, height));\r\n        },\r\n        [props, x, y, width, height]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Line({ p, from, to, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.line(...handleValueOrFunction(p, from, to).flat());\r\n        },\r\n        [props, from, to]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Point({ p, x, y, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.point(...handleValueOrFunction(p, x, y));\r\n        },\r\n        [props, x, y]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Square({ p, x, y, size, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.square(...handleValueOrFunction(p, x, y, size));\r\n        },\r\n        [props, x, y, size]\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n"],"names":["Command","command","p","renderContext","useContext","P5RenderContext","commandIndex","useRef","useEffect","clear","defineCommand","p5Instance","current","handleValueOrFunction","values","returnValue","map","value","length","handleCommonProps","props","applyProp","propName","hasOwnProperty","Array","isArray","noFill","noStroke","PushPop","children","push","useCallback","pop","Debug","ctx","P5Context","frameRateHistory","displayDebugInfo","fill","rect","textFont","textLeading","fr","Math","round","frameRate","avgFr","reduce","total","curr","shift","text","getCommands","setup","draw","createContext","RenderContextProvider","step","defineCommandFactory","getOptions","api","rootP5Instance","Setup","SETUP","Draw","DRAW","debug","p5","disableFriendlyErrors","PRELOAD","useP5","context","root","useDraw","DEFAULT_OPTIONS","clearOnDraw","P5","options","useState","setP5Instance","__ready","canvasOptions","useMemo","commands","remove","__id","setTimeout","forEach","key","idx","handler","__type","splice","index","indexOf","filter","c","EMPTY_ARRAY","Object","freeze","Layer","autoClear","blendMode","opacity","filters","isStatic","applyFunction","x","y","width","height","id","layerImage","setLayerImage","pg","applyCallbacks","applyLayer","doApply","content","tint","image","mouseX","mouseY","contentToApply","copyParams","createImage","copy","cb","applyFilters","applyAutoClear","createLayer","createGraphics","on","event","console","error","__isLayer","Mask","mask","layer","apply","parentLayer","parentImg","Canvas","renderer","rp","canvasContainerRef","canvas","createCanvas","log","parent","Rectangle","FullCanvasRectangle","LinearGradient","colors","angle","angleMode","params","RADIANS","radians","DEGREES","angleInDegrees","degrees","endVectorAngle","startVector","createVector","endVector","Vector","fromAngle","setMag","sin","gradient","drawingContext","createLinearGradient","color","i","stop","addColorStop","toString","fillStyle","Body","model","_model","objectState","setObjectState","update","state","Arc","start","arc","Background","background","Circle","size","circle","Ellipse","ellipse","Line","from","to","line","flat","Point","point","Square","square"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAGaA,OAAO,GAAG,SAAVA,OAAU,OAAoB;AAAA,MAAjBC,OAAiB,QAAjBA,OAAiB;AAAA,MAARC,CAAQ,QAARA,CAAQ;AACvC,MAAMC,aAAa,GAAGC,UAAU,CAACC,eAAD,CAAhC;AACA,MAAMC,YAAY,GAAGC,MAAM,CAAC,IAAD,CAA3B;AAEAC,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAMC,KAAK,GAAGN,aAAa,CAACO,aAAd,CACVT,OADU,EAEV;AAAA,aAAMC,CAAC,IAAIC,aAAa,CAACQ,UAAzB;AAAA,KAFU,EAGVL,YAAY,CAACM,OAHH,CAAd;AAKA,WAAO,YAAM;AACTN,MAAAA,YAAY,CAACM,OAAb,GAAuBH,KAAK,EAA5B;AACH,KAFD;AAGH,GATQ,EASN,CAACR,OAAD,EAAUC,CAAV,EAAaC,aAAb,CATM,CAAT;AAUA,SAAO,IAAP;AACH;;AClBM,IAAMU,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACX,CAAD,EAAkB;AAAA,oCAAXY,MAAW;AAAXA,IAAAA,MAAW;AAAA;;AACnD,MAAMC,WAAW,GAAGD,MAAM,CAACE,GAAP,CAAW,UAAAC,KAAK;AAAA,WAChC,OAAOA,KAAP,KAAiB,UAAjB,GAA8BA,KAAK,CAACf,CAAD,CAAnC,GAAyCe,KADT;AAAA,GAAhB,CAApB;AAIA,MAAIF,WAAW,CAACG,MAAZ,IAAsB,CAA1B,EAA6B,OAAOH,WAAW,CAAC,CAAD,CAAlB;AAC7B,SAAOA,WAAP;AACH,CAPM;;ACEA,SAASI,iBAAT,CAA2BC,KAA3B,EAAkClB,CAAlC,EAAqC;AACxC,MAAMmB,SAAS,GAAG,SAAZA,SAAY,CAAAC,QAAQ,EAAI;AAC1B,QAAI,CAACF,KAAK,CAACG,cAAN,CAAqBD,QAArB,CAAL,EAAqC;AACrC,QAAML,KAAK,GAAGJ,qBAAqB,CAACX,CAAD,EAAIkB,KAAK,CAACE,QAAD,CAAT,CAAnC;AAEA,QAAIE,KAAK,CAACC,OAAN,CAAcR,KAAd,CAAJ,EAA0Bf,CAAC,CAACoB,QAAD,CAAD,OAAApB,CAAC,qBAAce,KAAd,EAAD,CAA1B,KACKf,CAAC,CAACoB,QAAD,CAAD,CAAYL,KAAZ;AACR,GAND;;AAQA,MAAIG,KAAK,CAACM,MAAV,EAAkBxB,CAAC,CAACwB,MAAF;AAClB,MAAIN,KAAK,CAACO,QAAV,EAAoBzB,CAAC,CAACyB,QAAF;AAEpBN,EAAAA,SAAS,CAAC,aAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,UAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,WAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,WAAD,CAAT;AAEAA,EAAAA,SAAS,CAAC,MAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,QAAD,CAAT;AAEAA,EAAAA,SAAS,CAAC,YAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,WAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,cAAD,CAAT;AAEAA,EAAAA,SAAS,CAAC,WAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,QAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,OAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,QAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,QAAD,CAAT;AACAA,EAAAA,SAAS,CAAC,aAAD,CAAT;AACH;;AC5BM,SAASO,OAAT,OAAyC;AAAA,MAAtBC,QAAsB,QAAtBA,QAAsB;AAAA,MAATT,KAAS;;AAC5C,MAAMU,IAAI,GAAGC,WAAW,CACpB,UAAA7B,CAAC,EAAI;AACDA,IAAAA,CAAC,CAAC4B,IAAF;AACAX,IAAAA,iBAAiB,CAACC,KAAD,EAAQlB,CAAR,CAAjB;AACH,GAJmB,EAKpB,CAACkB,KAAD,CALoB,CAAxB;AAQA,MAAMY,GAAG,GAAGD,WAAW,CAAC,UAAA7B,CAAC,EAAI;AACzBA,IAAAA,CAAC,CAAC8B,GAAF;AACH,GAFsB,EAEpB,EAFoB,CAAvB;AAGA,sBACI,uDACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEF;AAAlB,IADJ,EAEKD,QAFL,eAGI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEG;AAAlB,IAHJ,CADJ;AAOH;;AClBM,SAASC,KAAT,GAAiB;AACpB,MAAMC,GAAG,GAAG9B,UAAU,CAAC+B,SAAD,CAAtB;AACA,MAAMC,gBAAgB,GAAG7B,MAAM,CAAC,EAAD,CAA/B;AAEA,MAAM8B,gBAAgB,GAAGN,WAAW,CAChC,UAAA7B,CAAC,EAAI;AACDA,IAAAA,CAAC,CAACoC,IAAF,CAAO,CAAP,EAAU,EAAV;AACApC,IAAAA,CAAC,CAACyB,QAAF;AACAzB,IAAAA,CAAC,CAACqC,IAAF,CAAO,CAAP,EAAU,CAAV,EAAa,GAAb,EAAkB,EAAlB;AAEArC,IAAAA,CAAC,CAACoC,IAAF,CAAO,GAAP;AACApC,IAAAA,CAAC,CAACsC,QAAF,CAAW,SAAX;AACAtC,IAAAA,CAAC,CAACuC,WAAF,CAAc,EAAd;AACA,QAAMC,EAAE,GAAGC,IAAI,CAACC,KAAL,CAAW1C,CAAC,CAAC2C,SAAF,EAAX,CAAX;AACA,QAAMC,KAAK,GACPV,gBAAgB,CAACxB,OAAjB,CAAyBmC,MAAzB,CACI,UAACC,KAAD,EAAQC,IAAR;AAAA,aAAiBD,KAAK,GAAGC,IAAzB;AAAA,KADJ,EAEI,CAFJ,IAGIb,gBAAgB,CAACxB,OAAjB,CAAyBM,MAJjC;AAKAkB,IAAAA,gBAAgB,CAACxB,OAAjB,CAAyBkB,IAAzB,CAA8BY,EAA9B;AACA,QAAIA,EAAE,GAAG,GAAT,EAAcA,EAAE,CAACQ,KAAH;AACd,QAAMC,IAAI,iCAA0BT,EAA1B,mCACAC,IAAI,CAACC,KAAL,CAAWE,KAAX,CADA,+BAEJZ,GAAG,CAACkB,WAAJ,GAAkBC,KAAlB,CAAwBnC,MAFpB,8BAGLgB,GAAG,CAACkB,WAAJ,GAAkBE,IAAlB,CAAuBpC,MAHlB,eAAV;AAKAhB,IAAAA,CAAC,CAACiD,IAAF,CAAOA,IAAP,EAAa,CAAb,EAAgB,EAAhB;AACH,GAvB+B,EAwBhC,CAACjB,GAAD,CAxBgC,CAApC;AA2BA,sBACI,oBAAC,OAAD,qBACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEG;AAAlB,IADJ,CADJ;AAKH;;ICtCYhC,eAAe,GAAGkD,aAAa,CAAC,IAAD;AAErC,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,OAAwB;AAAA,MAArBC,IAAqB,QAArBA,IAAqB;AAAA,MAAf5B,QAAe,QAAfA,QAAe;;AAAA,oBACAzB,UAAU,CAC/D+B,SAD+D,CADV;AAAA,MACjDxB,UADiD,eACjDA,UADiD;AAAA,MACrC+C,oBADqC,eACrCA,oBADqC;AAAA,MACfC,UADe,eACfA,UADe;;AAIzD,MAAMC,GAAG,GAAG;AACRlD,IAAAA,aAAa,EAAEgD,oBAAoB,CAACD,IAAD,CAD3B;AAERI,IAAAA,cAAc,EAAElD,UAFR;AAGRA,IAAAA,UAAU,EAAVA,UAHQ;AAIRgD,IAAAA,UAAU,EAAVA;AAJQ,GAAZ;AAOA,MAAI,CAAChD,UAAL,EAAiB,OAAO,IAAP;AAEjB,sBACI,oBAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAEiD;AAAjC,KACK/B,QADL,CADJ;AAKH,CAlBM;IAoBMiC,KAAK,GAAG,SAARA,KAAQ,QAAkB;AAAA,MAAfjC,QAAe,SAAfA,QAAe;AACnC,sBACI,oBAAC,qBAAD;AAAuB,IAAA,IAAI,EAAEkC;AAA7B,KAAqClC,QAArC,CADJ;AAGH;IACYmC,IAAI,GAAG,SAAPA,IAAO,QAAkB;AAAA,MAAfnC,QAAe,SAAfA,QAAe;;AAAA,qBACXzB,UAAU,CAAC+B,SAAD,CADC;AAAA,MAC1BwB,UAD0B,gBAC1BA,UAD0B;;AAElC,sBACI,oBAAC,qBAAD;AAAuB,IAAA,IAAI,EAAEM;AAA7B,KACKpC,QADL,EAEK8B,UAAU,GAAGO,KAAb,iBAAsB,oBAAC,KAAD,OAF3B,CADJ;AAMH;;AC3BDC,EAAE,CAACC,qBAAH,GAA2B,IAA3B;AACO,IAAML,KAAK,GAAG,OAAd;AACA,IAAME,IAAI,GAAG,MAAb;AACA,IAAMI,OAAO,GAAG,SAAhB;IAEMlC,SAAS,GAAGoB,aAAa,CAAC,IAAD;IAEzBe,KAAK,GAAG,SAARA,KAAQ,GAAM;AACvB,MAAMC,OAAO,GAAGnE,UAAU,CAACC,eAAD,CAA1B;AACA,SAAO;AACHH,IAAAA,CAAC,EAAEqE,OAAO,CAAC5D,UADR;AAEH6D,IAAAA,IAAI,EAAED,OAAO,CAACV,cAFX;AAGHP,IAAAA,IAAI,EAAEiB,OAAO,CAAC7D;AAHX,GAAP;AAKH;IAEY+D,OAAO,GAAG,SAAVA,OAAU,CAAAxE,OAAO,EAAI;AAAA,cACbqE,KAAK,EADQ;AAAA,MACtBhB,IADsB,SACtBA,IADsB;;AAG9B9C,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAMC,KAAK,GAAG6C,IAAI,CAACrD,OAAD,CAAlB;AACA,WAAO;AAAA,aAAMQ,KAAK,EAAX;AAAA,KAAP;AACH,GAHQ,EAGN,CAAC6C,IAAD,EAAOrD,OAAP,CAHM,CAAT;AAIH;AAED,IAAMyE,eAAe,GAAG;AACpBC,EAAAA,WAAW,EAAE,KADO;AAEpB9B,EAAAA,SAAS,EAAE,EAFS;AAGpBqB,EAAAA,KAAK,EAAE;AAHa,CAAxB;IAMaU,EAAE,GAAG,SAALA,EAAK,OAAqC;AAAA;;AAAA,MAAlCC,OAAkC,QAAlCA,OAAkC;AAAA,MAAzBhD,QAAyB,QAAzBA,QAAyB;AAAA,MAAZT,KAAY;;AAAA,kBACf0D,QAAQ,CAAC,IAAD,CADO;AAAA;AAAA,MAC5CnE,UAD4C;AAAA,MAChCoE,aADgC;;AAEnD,MAAMC,OAAO,GAAGzE,MAAM,CAAC,KAAD,CAAtB;;AACA,MAAM0E,aAAa,GAAGC,OAAO,CAAC;AAAA,8BAAYR,eAAZ,MAAgCG,OAAhC;AAAA,GAAD,EAA6C,CACtEA,OADsE,CAA7C,CAA7B;AAGA,MAAMM,QAAQ,GAAG5E,MAAM,yCAClBwD,KADkB,EACV,EADU,4BAElBE,IAFkB,EAEX,EAFW,4BAGlBI,OAHkB,EAGR,EAHQ,YAAvB;AAMA7D,EAAAA,SAAS,CAAC,YAAM;AACZ,WAAO,YAAM;AACT,UAAIG,UAAJ,EAAgBA,UAAU,CAACyE,MAAX;AACnB,KAFD;AAGH,GAJQ,EAIN,CAACzE,UAAD,CAJM,CAAT;AAMAH,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAI,CAACG,UAAL,EAAiB;AACboE,MAAAA,aAAa,CACT,IAAIZ,EAAJ,CAAO,UAAAjE,CAAC,EAAI;AACRA,QAAAA,CAAC,CAACmF,IAAF,GAAS,MAAT;;AAEAnF,QAAAA,CAAC,CAACmD,KAAF,GAAU,YAAM;AACZnD,UAAAA,CAAC,CAAC2C,SAAF,CAAYoC,aAAa,CAACpC,SAA1B,EADY;AAGZ;AACA;AACA;;AACAyC,UAAAA,UAAU,CAAC,YAAM;AACbH,YAAAA,QAAQ,CAACvE,OAAT,CAAiBmD,KAAjB,EAAwBwB,OAAxB,CAAgC,UAAAtF,OAAO;AAAA,qBACnCA,OAAO,EAD4B;AAAA,aAAvC;AAGA+E,YAAAA,OAAO,CAACpE,OAAR,GAAkB,IAAlB;AACH,WALS,CAAV;AAMH,SAZD;;AAcAV,QAAAA,CAAC,CAACoD,IAAF,GAAS,YAAM;AACX,cAAI0B,OAAO,CAACpE,OAAR,KAAoB,IAAxB,EAA8B;;AAC9B,cAAIqE,aAAa,CAACN,WAAlB,EAA+B;AAC3BzE,YAAAA,CAAC,CAACO,KAAF;AACH;;AACD0E,UAAAA,QAAQ,CAACvE,OAAT,CAAiBqD,IAAjB,EAAuBsB,OAAvB,CAA+B,UAAAtF,OAAO,EAAI;AACtCA,YAAAA,OAAO;AACV,WAFD;AAGH,SARD;AASH,OA1BD,CADS,CAAb;AA6BH;AACJ,GAhCQ,EAgCN,CAACgF,aAAa,CAACN,WAAf,EAA4BM,aAAa,CAACpC,SAA1C,EAAqDlC,UAArD,CAhCM,CAAT;AAkCA,MAAMiD,GAAG,GAAG;AACRjD,IAAAA,UAAU,EAAVA,UADQ;AAERgD,IAAAA,UAAU,EAAE;AAAA,aAAMsB,aAAN;AAAA,KAFJ;AAGR7B,IAAAA,WAAW,EAAE;AAAA,aAAM+B,QAAQ,CAACvE,OAAf;AAAA,KAHL;AAIR8C,IAAAA,oBAAoB,EAAE,8BAAA8B,GAAG;AAAA,aAAI,UAACvF,OAAD,EAAoC;AAAA,YAA1BiC,GAA0B,uEAApBvB,UAAoB;AAAA,YAAR8E,GAAQ;;AAC7D,YAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AACzBA,UAAAA,GAAG,GAAGN,QAAQ,CAACvE,OAAT,CAAiB4E,GAAjB,EAAsBtE,MAA5B;AACH;;AAED,YAAMwE,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB,iBAAOzF,OAAO,CAAC,OAAOiC,GAAP,KAAe,UAAf,GAA4BA,GAAG,EAA/B,GAAoCA,GAArC,CAAd;AACH,SAFD;;AAGAwD,QAAAA,OAAO,CAACC,MAAR,GAAiB1F,OAAO,CAAC0F,MAAzB;;AACA,YAAIR,QAAQ,CAACvE,OAAT,CAAiB4E,GAAjB,EAAsBtE,MAAtB,IAAgC,CAApC,EAAuC;AACnCiE,UAAAA,QAAQ,CAACvE,OAAT,CAAiB4E,GAAjB,EAAsB1D,IAAtB,CAA2B4D,OAA3B;AACH,SAFD,MAEO;AACHP,UAAAA,QAAQ,CAACvE,OAAT,CAAiB4E,GAAjB,EAAsBI,MAAtB,CAA6BH,GAA7B,EAAkC,CAAlC,EAAqCC,OAArC;AACH;;AACD,eAAO,YAAM;AACT,cAAMG,KAAK,GAAGV,QAAQ,CAACvE,OAAT,CAAiB4E,GAAjB,EAAsBM,OAAtB,CAA8BJ,OAA9B,CAAd;AACAP,UAAAA,QAAQ,CAACvE,OAAT,CAAiB4E,GAAjB,IAAwBL,QAAQ,CAACvE,OAAT,CAAiB4E,GAAjB,EAAsBO,MAAtB,CACpB,UAAAC,CAAC;AAAA,mBAAIA,CAAC,KAAKN,OAAV;AAAA,WADmB,CAAxB;AAGA,iBAAOG,KAAP;AACH,SAND;AAOH,OArBwB;AAAA;AAJjB,GAAZ;AA4BA,sBAAO,oBAAC,SAAD,CAAW,QAAX;AAAoB,IAAA,KAAK,EAAEjC;AAA3B,KAAiC/B,QAAjC,CAAP;AACH;;ACjHD,IAAMoE,WAAW,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,CAApB;AAEO,SAASC,KAAT,OAaJ;AAAA,4BAZCC,SAYD;AAAA,MAZCA,SAYD,+BAZa,IAYb;AAAA,2BAXCxE,QAWD;AAAA,MAXCA,QAWD,8BAXY,IAWZ;AAAA,4BAVCyE,SAUD;AAAA,MAVCA,SAUD,+BAVa,OAUb;AAAA,MATCC,OASD,QATCA,OASD;AAAA,0BARCC,OAQD;AAAA,MARCA,OAQD,6BARWP,WAQX;AAAA,2BAPCQ,QAOD;AAAA,MAPCA,QAOD,8BAPY,KAOZ;AAAA,MANCC,aAMD,QANCA,aAMD;AAAA,oBALCC,CAKD;AAAA,MALCA,CAKD,uBALK,CAKL;AAAA,oBAJCC,CAID;AAAA,MAJCA,CAID,uBAJK,CAIL;AAAA,wBAHCC,KAGD;AAAA,MAHCA,KAGD,2BAHS,UAAA3G,CAAC;AAAA,WAAIA,CAAC,CAAC2G,KAAN;AAAA,GAGV;AAAA,yBAFCC,MAED;AAAA,MAFCA,MAED,4BAFU,UAAA5G,CAAC;AAAA,WAAIA,CAAC,CAAC4G,MAAN;AAAA,GAEX;AAAA,MADCC,EACD,QADCA,EACD;;AAAA,kBACqCjC,QAAQ,CAAC,IAAD,CAD7C;AAAA;AAAA,MACQkC,UADR;AAAA,MACoBC,aADpB;;AAEC,MAAMC,EAAE,GAAG3G,MAAM,CAAC,IAAD,CAAjB;AACA,MAAM4G,cAAc,GAAG5G,MAAM,CAAC,EAAD,CAA7B;AACA,MAAM2B,GAAG,GAAG9B,UAAU,CAACC,eAAD,CAAtB;AAEAG,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIiG,QAAJ,EAAc;AACVQ,MAAAA,aAAa,CAAC,IAAD,CAAb;AACH;AACJ,GAJQ,EAIN,CAACpF,QAAD,EAAW0E,OAAX,EAAoBD,SAApB,EAA+BG,QAA/B,CAJM,CAAT;;AAMA,MAAM7C,GAAG,sBACF1B,GADE;AAEL,QAAIvB,UAAJ,GAAiB;AACb,aAAOuG,EAAE,CAACtG,OAAV;AACH;;AAJI,IAAT;;AAOA,MAAMwG,UAAU,GAAGrF,WAAW,CAAC,YAAM;AACjC,QAAM7B,CAAC,GAAGgC,GAAG,CAACvB,UAAd;;AACA,QAAM0G,OAAO,GAAG,SAAVA,OAAU,CAAAC,OAAO,EAAI;AACvBpH,MAAAA,CAAC,CAACoG,SAAF,CAAYpG,CAAC,CAACoG,SAAD,CAAb,EADuB;;AAGvB,UAAIC,OAAJ,EAAa;AACTrG,QAAAA,CAAC,CAACqH,IAAF,CAAO,GAAP,EAAYhB,OAAZ;AACH;;AACDrG,MAAAA,CAAC,CAACsH,KAAF,CACIF,OADJ,EAEIzG,qBAAqB,CAACX,CAAD,EAAIyG,CAAJ,CAFzB,EAGI9F,qBAAqB,CAACX,CAAD,EAAI0G,CAAJ,CAHzB,EAII/F,qBAAqB,CAACX,CAAD,EAAI2G,KAAJ,CAJzB,EAKIhG,qBAAqB,CAACX,CAAD,EAAI4G,MAAJ,CALzB;AAOH,KAbD;;AAeA,QAAIE,UAAU,IAAIP,QAAlB,EAA4B;AACxBY,MAAAA,OAAO,CAACL,UAAD,CAAP;AACA;AACH;;AACD,QAAI,CAACE,EAAE,CAACtG,OAAJ,IAAesG,EAAE,CAACtG,OAAH,CAAWiG,KAAX,IAAoB,CAAnC,IAAwCK,EAAE,CAACtG,OAAH,CAAWkG,MAAX,IAAqB,CAAjE,EAAoE;AAChE;AACH;;AAEDI,IAAAA,EAAE,CAACtG,OAAH,CAAW6G,MAAX,GAAoBvH,CAAC,CAACuH,MAAF,GAAW5G,qBAAqB,CAACX,CAAD,EAAIyG,CAAJ,CAApD;AACAO,IAAAA,EAAE,CAACtG,OAAH,CAAW8G,MAAX,GAAoBxH,CAAC,CAACwH,MAAF,GAAW7G,qBAAqB,CAACX,CAAD,EAAI0G,CAAJ,CAApD;AAEA,QAAIe,cAAc,GAAGT,EAAE,CAACtG,OAAxB;;AAEA,QAAIuG,cAAc,CAACvG,OAAf,CAAuBM,MAAvB,GAAgC,CAApC,EAAuC;AAAA;;AACnC,UAAM0G,UAAU,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAOV,EAAE,CAACtG,OAAH,CAAWiG,KAAlB,EAAyBK,EAAE,CAACtG,OAAH,CAAWkG,MAApC,CAAnB;AACAa,MAAAA,cAAc,GAAGzH,CAAC,CAAC2H,WAAF,CAAcX,EAAE,CAACtG,OAAH,CAAWiG,KAAzB,EAAgCK,EAAE,CAACtG,OAAH,CAAWkG,MAA3C,CAAjB;;AACA,yBAAAa,cAAc,EAACG,IAAf,yBAAoBZ,EAAE,CAACtG,OAAvB,SAAmCgH,UAAnC,EAAkDA,UAAlD;;AACAT,MAAAA,cAAc,CAACvG,OAAf,CAAuB2E,OAAvB,CAA+B,UAAAwC,EAAE;AAAA,eAC7BA,EAAE,CAACb,EAAE,CAACtG,OAAJ,EAAa+G,cAAb,CAD2B;AAAA,OAAjC;AAGH;;AAED,QAAIjB,aAAJ,EAAmBA,aAAa,CAACQ,EAAE,CAACtG,OAAJ,CAAb,CAAnB,KACKyG,OAAO,CAACM,cAAD,CAAP;;AAEL,QAAIlB,QAAJ,EAAc;AACVQ,MAAAA,aAAa,CAACU,cAAD,CAAb;AACH;AACJ,GA7C6B,EA6C3B,CACCzF,GAAG,CAACvB,UADL,EAECqG,UAFD,EAGCP,QAHD,EAICC,aAJD,EAKCJ,SALD,EAMCC,OAND,EAOCI,CAPD,EAQCC,CARD,EASCC,KATD,EAUCC,MAVD,CA7C2B,CAA9B;AA0DA,MAAMkB,YAAY,GAAGjG,WAAW,CAAC,YAAM;AACnC,QAAI,CAACmF,EAAE,CAACtG,OAAR,EAAiB;AACjB4F,IAAAA,OAAO,CAACjB,OAAR,CAAgB,UAAAQ,MAAM,EAAI;AACtB,UAAIvE,KAAK,CAACC,OAAN,CAAcsE,MAAd,CAAJ,EAA2B;AAAA;;AACvB,uBAAAmB,EAAE,CAACtG,OAAH,EAAWmF,MAAX,uCAAqBA,MAArB;AACH,OAFD,MAEO;AACHmB,QAAAA,EAAE,CAACtG,OAAH,CAAWmF,MAAX,CAAkBA,MAAlB;AACH;AACJ,KAND;AAOH,GAT+B,EAS7B,CAACS,OAAD,CAT6B,CAAhC;AAWA,MAAMyB,cAAc,GAAGlG,WAAW,CAAC,YAAM;AACrC,QAAI,CAACmF,EAAE,CAACtG,OAAR,EAAiB;AACjBsG,IAAAA,EAAE,CAACtG,OAAH,CAAWH,KAAX;AACH,GAHiC,EAG/B,EAH+B,CAAlC;AAKA,MAAMyH,WAAW,GAAGnG,WAAW,CAC3B,UAAA7B,CAAC,EAAI;AACD,QAAI,CAACgH,EAAE,CAACtG,OAAR,EAAiB;AACbsG,MAAAA,EAAE,CAACtG,OAAH,GAAasB,GAAG,CAAC2B,cAAJ,CAAmBsE,cAAnB,CACTtH,qBAAqB,CAACqB,GAAG,CAAC2B,cAAL,EAAqBgD,KAArB,CADZ,EAEThG,qBAAqB,CAACqB,GAAG,CAAC2B,cAAL,EAAqBiD,MAArB,CAFZ,CAAb;;AAIAI,MAAAA,EAAE,CAACtG,OAAH,CAAWwH,EAAX,GAAgB,UAACC,KAAD,EAAQN,EAAR,EAAe;AAC3B,gBAAQM,KAAR;AACI,eAAK,OAAL;AACIlB,YAAAA,cAAc,CAACvG,OAAf,CAAuBkB,IAAvB,CAA4BiG,EAA5B;AACA,mBAAO,YAAM;AACTZ,cAAAA,cAAc,CAACvG,OAAf,CAAuBgF,MAAvB,CACIuB,cAAc,CAACvG,OAAf,CAAuBkF,OAAvB,CAA+BiC,EAA/B,CADJ,EAEI,CAFJ;AAIH,aALD;;AAMJ;AACIO,YAAAA,OAAO,CAACC,KAAR,CAAc,oBAAd,EAAoCF,KAApC;AAVR;AAYH,OAbD;AAcH;;AACDnB,IAAAA,EAAE,CAACtG,OAAH,CAAW4H,SAAX,GAAuB,IAAvB;AACAtB,IAAAA,EAAE,CAACtG,OAAH,CAAWyE,IAAX,GAAkB0B,EAAlB;AACH,GAxB0B,EAyB3B,CAAC7E,GAAG,CAAC2B,cAAL,EAAqBiD,MAArB,EAA6BC,EAA7B,EAAiCF,KAAjC,CAzB2B,CAA/B;AA4BA,sBACI,oBAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAEjD;AAAjC,kBACI,0CACK,CAACoD,UAAD,iBAAe,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEkB;AAAlB,IADpB,EAEK,CAAClB,UAAD,IAAeX,SAAf,iBACG,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAE4B;AAAlB,IAHR,EAKK,CAACjB,UAAD,IAAenF,QALpB,EAMK,CAACmF,UAAD,IAAeR,OAAO,CAACtF,MAAR,GAAiB,CAAhC,iBACG,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAE8G;AAAlB,IAPR,eASI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEZ;AAAlB,IATJ,CADJ,CADJ;AAeH;;AC7JM,SAASqB,IAAT,OAA0C;AAAA,MAA1B1B,EAA0B,QAA1BA,EAA0B;AAAA,MAAtBlF,QAAsB,QAAtBA,QAAsB;AAAA,MAATT,KAAS;;AAC7C,MAAMc,GAAG,GAAG9B,UAAU,CAACC,eAAD,CAAtB;AACA,MAAMqI,IAAI,GAAGnI,MAAM,CAAC,IAAD,CAAnB;AAEA,MAAMmG,aAAa,GAAG3E,WAAW,CAC7B,UAAA4G,KAAK,EAAI;AACL,QAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,WAAD,EAAcC,SAAd,EAA4B;AACtCA,MAAAA,SAAS,CAACJ,IAAV,CAAeC,KAAf;AACH,KAFD;;AAGA,QAAID,IAAI,CAAC9H,OAAT,EAAkB8H,IAAI,CAAC9H,OAAL;AAClB8H,IAAAA,IAAI,CAAC9H,OAAL,GAAesB,GAAG,CAACvB,UAAJ,CAAeyH,EAAf,CAAkB,OAAlB,EAA2BQ,KAA3B,CAAf;AACH,GAP4B,EAQ7B,CAAC1G,GAAG,CAACvB,UAAL,CAR6B,CAAjC;AAWA,sBACI,oBAAC,KAAD;AAAO,IAAA,EAAE,EAAEoG,EAAX;AAAe,IAAA,aAAa,EAAEL;AAA9B,KAAiDtF,KAAjD,GACKS,QADL,CADJ;AAKH;;ACpBM,SAASkH,MAAT,OAMJ;AAAA,MALClC,KAKD,QALCA,KAKD;AAAA,MAJCC,MAID,QAJCA,MAID;AAAA,2BAHCkC,QAGD;AAAA,MAHCA,QAGD,8BAHY,KAGZ;AAAA,MAFCnH,QAED,QAFCA,QAED;AAAA,MADIT,KACJ;;AAAA,oBACgChB,UAAU,CAACC,eAAD,CAD1C;AAAA,MACyB4I,EADzB,eACSpF,cADT;;AAEC,MAAMqF,kBAAkB,GAAG3I,MAAM,CAAC,IAAD,CAAjC;AACA,MAAMN,OAAO,GAAG8B,WAAW,CAAC,YAAM;AAC9B,QAAMoH,MAAM,GAAGF,EAAE,CAACG,YAAH,CAAgBvC,KAAhB,EAAuBC,MAAvB,EAA+BkC,QAA/B,CAAf;AACAV,IAAAA,OAAO,CAACe,GAAR,CAAY,eAAZ;AACAF,IAAAA,MAAM,CAACG,MAAP,CAAcJ,kBAAkB,CAACtI,OAAjC;AACH,GAJ0B,EAIxB,CAACkG,MAAD,EAASkC,QAAT,EAAmBC,EAAnB,EAAuBpC,KAAvB,CAJwB,CAA3B;AAMA,sBACI,uDACI;AAAK,IAAA,GAAG,EAAEqC;AAAV,KAAkC9H,KAAlC,EADJ,eAEI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEnB;AAAlB,KAA4B4B,QAA5B,CAFJ,CADJ;AAMH;;ACpBM,SAAS0H,SAAT,OAAmE;AAAA,MAA9CrJ,CAA8C,QAA9CA,CAA8C;AAAA,MAA3CyG,CAA2C,QAA3CA,CAA2C;AAAA,MAAxCC,CAAwC,QAAxCA,CAAwC;AAAA,MAArCC,KAAqC,QAArCA,KAAqC;AAAA,MAA9BC,MAA8B,QAA9BA,MAA8B;AAAA,MAAtBjF,QAAsB,QAAtBA,QAAsB;AAAA,MAATT,KAAS;;AACtE,MAAMnB,OAAO,GAAG8B,WAAW,CACvB,UAAA7B,CAAC,EAAI;AACDiB,IAAAA,iBAAiB,CAACC,KAAD,EAAQlB,CAAR,CAAjB;AACAA,IAAAA,CAAC,CAACqC,IAAF,OAAArC,CAAC,qBAASW,qBAAqB,CAACX,CAAD,EAAIyG,CAAJ,EAAOC,CAAP,EAAUC,KAAV,EAAiBC,MAAjB,CAA9B,EAAD;AACH,GAJsB,EAKvB,CAAC1F,KAAD,EAAQuF,CAAR,EAAWC,CAAX,EAAcC,KAAd,EAAqBC,MAArB,CALuB,CAA3B;AAOA,sBACI,uDACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAE7G;AAAlB,IADJ,EAEK4B,QAFL,CADJ;AAMH;;ACVD,IAAM2H,mBAAmB,GAAG,SAAtBA,mBAAsB;AAAA,sBACxB,oBAAC,SAAD;AACI,IAAA,CAAC,EAAE,CADP;AAEI,IAAA,CAAC,EAAE,CAFP;AAGI,IAAA,KAAK,EAAE,eAAAtJ,CAAC;AAAA,aAAIA,CAAC,CAAC2G,KAAN;AAAA,KAHZ;AAII,IAAA,MAAM,EAAE,gBAAA3G,CAAC;AAAA,aAAIA,CAAC,CAAC4G,MAAN;AAAA,KAJb;AAKI,IAAA,QAAQ;AALZ,IADwB;AAAA,CAA5B;;AASO,SAAS2C,cAAT,OAUJ;AAAA,oBATC9C,CASD;AAAA,MATCA,CASD,uBATK,CASL;AAAA,oBARCC,CAQD;AAAA,MARCA,CAQD,uBARK,CAQL;AAAA,MAPCC,KAOD,QAPCA,KAOD;AAAA,MANCC,MAMD,QANCA,MAMD;AAAA,yBALC4C,MAKD;AAAA,MALCA,MAKD,4BALU,CAAC,OAAD,EAAU,OAAV,CAKV;AAAA,MAJCC,KAID,QAJCA,KAID;AAAA,MAHCC,SAGD,QAHCA,SAGD;AAAA,MAFC/H,QAED,QAFCA,QAED;AAAA,MADIT,KACJ;;AAAA,oBACgChB,UAAU,CAACC,eAAD,CAD1C;AAAA,MACyB4I,EADzB,eACSpF,cADT;;AAGC,MAAM5D,OAAO,GAAG8B,WAAW,CACvB,UAAA7B,CAAC,EAAI;AACDiB,IAAAA,iBAAiB,CAACC,KAAD,EAAQlB,CAAR,CAAjB;AACA,QAAM2J,MAAM,GAAG;AACXlD,MAAAA,CAAC,EAAE9F,qBAAqB,CAACoI,EAAD,EAAKtC,CAAL,CADb;AAEXC,MAAAA,CAAC,EAAE/F,qBAAqB,CAACoI,EAAD,EAAKrC,CAAL,CAFb;AAGXC,MAAAA,KAAK,EAAEhG,qBAAqB,CAACoI,EAAD,EAAKpC,KAAL,CAArB,IAAoC3G,CAAC,CAAC2G,KAHlC;AAIXC,MAAAA,MAAM,EAAEjG,qBAAqB,CAACoI,EAAD,EAAKnC,MAAL,CAArB,IAAqC5G,CAAC,CAAC4G,MAJpC;AAKX6C,MAAAA,KAAK,EAAE9I,qBAAqB,CAACoI,EAAD,EAAKU,KAAL,CAArB,IAAoC,CALhC;AAMXC,MAAAA,SAAS,EAAE/I,qBAAqB,CAACoI,EAAD,EAAKW,SAAL,CAArB,IAAwC1J,CAAC,CAAC4J,OAN1C;AAOXJ,MAAAA,MAAM,EAAE7I,qBAAqB,MAArB,UAAsBoI,EAAtB,4BAA6BS,MAA7B;AAPG,KAAf;;AAUA,QAAIG,MAAM,CAACD,SAAP,KAAqB1J,CAAC,CAAC4J,OAA3B,EAAoC;AAChCD,MAAAA,MAAM,CAACF,KAAP,GAAezJ,CAAC,CAAC6J,OAAF,CAAUF,MAAM,CAACF,KAAjB,CAAf;AACH;;AACDzJ,IAAAA,CAAC,CAAC4B,IAAF;AACA5B,IAAAA,CAAC,CAAC0J,SAAF,CAAY1J,CAAC,CAAC8J,OAAd;AACA,QAAIC,cAAc,GAAG/J,CAAC,CAACgK,OAAF,CAAUL,MAAM,CAACF,KAAjB,IAA0B,GAA/C;AACA,QAAIQ,cAAc,GAAGjK,CAAC,CAACgK,OAAF,CAAUL,MAAM,CAACF,KAAjB,IAA0B,GAA/C;;AAEA,QAAIQ,cAAc,GAAG,EAAjB,IAAuBA,cAAc,IAAI,EAA7C,EAAiD;AAC7CA,MAAAA,cAAc,GAAG,KAAKA,cAAtB;AACH,KAFD,MAEO,IAAIA,cAAc,GAAG,EAAjB,IAAuBA,cAAc,IAAI,GAA7C,EAAkD;AACrDA,MAAAA,cAAc,IAAI,EAAlB;AACH,KAFM,MAEA,IAAIA,cAAc,GAAG,GAAjB,IAAwBA,cAAc,IAAI,GAA9C,EAAmD;AACtDA,MAAAA,cAAc,GAAG,MAAMA,cAAc,GAAG,EAAvB,CAAjB;AACH;;AAED,QAAMC,WAAW,GAAGlK,CAAC,CAACmK,YAAF,CAAeR,MAAM,CAAClD,CAAtB,EAAyBkD,MAAM,CAACjD,CAAhC,CAApB;AACA,QAAM0D,SAAS,GAAGnG,EAAE,CAACoG,MAAH,CAAUC,SAAV,CAAoBX,MAAM,CAACF,KAA3B,CAAlB;AAEAW,IAAAA,SAAS,CAACG,MAAV,CAAiBZ,MAAM,CAAChD,KAAP,GAAe3G,CAAC,CAACwK,GAAF,CAAM,KAAKP,cAAX,CAAhC;;AACA,QAAIF,cAAc,GAAG,GAArB,EAA0B;AACtBG,MAAAA,WAAW,CAACxD,CAAZ,IAAiBiD,MAAM,CAAC/C,MAAxB;AACAwD,MAAAA,SAAS,CAAC1D,CAAV,IAAeiD,MAAM,CAAC/C,MAAtB;AACH,KAHD,MAGO,IAAImD,cAAc,GAAG,GAArB,EAA0B;AAC7BG,MAAAA,WAAW,CAACzD,CAAZ,IAAiBkD,MAAM,CAAChD,KAAxB;AACAyD,MAAAA,SAAS,CAAC3D,CAAV,IAAekD,MAAM,CAAChD,KAAtB;AACAuD,MAAAA,WAAW,CAACxD,CAAZ,IAAiBiD,MAAM,CAAC/C,MAAxB;AACAwD,MAAAA,SAAS,CAAC1D,CAAV,IAAeiD,MAAM,CAAC/C,MAAtB;AACH,KALM,MAKA,IAAImD,cAAc,GAAG,EAArB,EAAyB;AAC5BG,MAAAA,WAAW,CAACzD,CAAZ,IAAiBkD,MAAM,CAAChD,KAAxB;AACAyD,MAAAA,SAAS,CAAC3D,CAAV,IAAekD,MAAM,CAAChD,KAAtB;AACH;;AACD3G,IAAAA,CAAC,CAAC8B,GAAF;AACA,QAAM2I,QAAQ,GAAGzK,CAAC,CAAC0K,cAAF,CAAiBC,oBAAjB,CACbT,WAAW,CAACzD,CADC,EAEbyD,WAAW,CAACxD,CAFC,EAGbiD,MAAM,CAAClD,CAAP,GAAW2D,SAAS,CAAC3D,CAHR,EAIbkD,MAAM,CAACjD,CAAP,GAAW0D,SAAS,CAAC1D,CAJR,CAAjB;AAMAiD,IAAAA,MAAM,CAACH,MAAP,CAAcnE,OAAd,CAAsB,UAACuF,KAAD,EAAQC,CAAR,EAAc;AAChC,UAAMC,IAAI,GAAGD,CAAC,IAAIlB,MAAM,CAACH,MAAP,CAAcxI,MAAd,GAAuB,CAA3B,CAAd;AACAyJ,MAAAA,QAAQ,CAACM,YAAT,CAAsBD,IAAtB,EAA4B9K,CAAC,CAAC4K,KAAF,CAAQA,KAAR,EAAeI,QAAf,EAA5B;AACH,KAHD;AAIAhL,IAAAA,CAAC,CAAC0K,cAAF,CAAiBO,SAAjB,GAA6BR,QAA7B,CAvDC;AA0DD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,GA3EsB,EA4EvB,CAACvJ,KAAD,EAAQ6H,EAAR,EAAYtC,CAAZ,EAAeC,CAAf,EAAkBC,KAAlB,EAAyBC,MAAzB,EAAiC6C,KAAjC,EAAwCC,SAAxC,EAAmDF,MAAnD,CA5EuB,CAA3B;AA+EA,sBACI,oBAAC,OAAD,qBACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEzJ;AAAlB,IADJ,EAEK4B,QAAQ,iBAAI,oBAAC,mBAAD,OAFjB,CADJ;AAMH;;AChHM,SAASuJ,IAAT,OAAmC;AAAA,MAAnBC,KAAmB,QAAnBA,KAAmB;AAAA,MAAZxJ,QAAY,QAAZA,QAAY;;AAAA,cACxByC,KAAK,EADmB;AAAA,MAC9BpE,CAD8B,SAC9BA,CAD8B;;AAEtC,MAAMoL,MAAM,GAAG/K,MAAM,CAAC,IAAD,CAArB;;AAFsC,kBAGAuE,QAAQ,CAAC,IAAD,CAHR;AAAA;AAAA,MAG/ByG,WAH+B;AAAA,MAGlBC,cAHkB;;AAKtC,MAAMvL,OAAO,GAAG8B,WAAW,CACvB,UAAA7B,CAAC,EAAI;AACD,QAAIqL,WAAJ,EAAiB;AACbD,MAAAA,MAAM,CAAC1K,OAAP,CAAe6K,MAAf,CAAsBvL,CAAtB;;AACAsL,MAAAA,cAAc,CAAC;AAAEE,QAAAA,KAAK,EAAEJ,MAAM,CAAC1K;AAAhB,OAAD,CAAd;AACH;AACJ,GANsB,EAOvB,CAAC2K,WAAD,CAPuB,CAA3B;AAUA/K,EAAAA,SAAS,CAAC,YAAM;AACZ;AACA;AACA,QAAI,CAAC8K,MAAM,CAAC1K,OAAZ,EAAqB;AACjB0E,MAAAA,UAAU,CAAC,YAAM;AACbgG,QAAAA,MAAM,CAAC1K,OAAP,GAAiByK,KAAK,CAACnL,CAAD,EAAIoL,MAAM,CAAC1K,OAAX,CAAtB;AACA4K,QAAAA,cAAc,CAAC;AAAEE,UAAAA,KAAK,EAAEJ,MAAM,CAAC1K;AAAhB,SAAD,CAAd;AACH,OAHS,CAAV;AAIH,KALD,MAKO;AACH0K,MAAAA,MAAM,CAAC1K,OAAP,GAAiByK,KAAK,CAACnL,CAAD,EAAIoL,MAAM,CAAC1K,OAAX,CAAtB;AACA4K,MAAAA,cAAc,CAAC;AAAEE,QAAAA,KAAK,EAAEJ,MAAM,CAAC1K;AAAhB,OAAD,CAAd;AACH;AACJ,GAZQ,EAYN,CAACyK,KAAD,EAAQnL,CAAR,CAZM,CAAT;AAcA,sBACI,uDACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAED;AAAlB,IADJ,EAEKsL,WAAW,IAAI1J,QAAQ,CAAC0J,WAAW,CAACG,KAAb,CAF5B,CADJ;AAMH;;AClCM,SAASC,GAAT,OAUJ;AAAA,MATCzL,CASD,QATCA,CASD;AAAA,MARCyG,CAQD,QARCA,CAQD;AAAA,MAPCC,CAOD,QAPCA,CAOD;AAAA,MANCE,MAMD,QANCA,MAMD;AAAA,MALCD,KAKD,QALCA,KAKD;AAAA,MAJC+E,KAID,QAJCA,KAID;AAAA,MAHCZ,IAGD,QAHCA,IAGD;AAAA,MAFCnJ,QAED,QAFCA,QAED;AAAA,MADIT,KACJ;;AACC,MAAMnB,OAAO,GAAG8B,WAAW,CACvB,UAAA7B,CAAC,EAAI;AACDiB,IAAAA,iBAAiB,CAACC,KAAD,EAAQlB,CAAR,CAAjB;AACAA,IAAAA,CAAC,CAAC2L,GAAF,OAAA3L,CAAC,qBACMW,qBAAqB,CAACX,CAAD,EAAIyG,CAAJ,EAAOC,CAAP,EAAUC,KAAV,EAAiBC,MAAjB,EAAyB8E,KAAzB,EAAgCZ,IAAhC,CAD3B,EAAD;AAGH,GANsB,EAOvB,CAAC5J,KAAD,EAAQuF,CAAR,EAAWC,CAAX,EAAcC,KAAd,EAAqBC,MAArB,EAA6B8E,KAA7B,EAAoCZ,IAApC,CAPuB,CAA3B;AASA,sBACI,uDACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAE/K;AAAlB,IADJ,EAEK4B,QAFL,CADJ;AAMH;;AC3BM,SAASiK,UAAT,OAAmD;AAAA,MAA7BhB,KAA6B,QAA7BA,KAA6B;AAAA,MAAtBjJ,QAAsB,QAAtBA,QAAsB;AAAA,MAATT,KAAS;;AACtD,MAAMnB,OAAO,GAAG8B,WAAW,CACvB,UAAA7B,CAAC,EAAI;AACDA,IAAAA,CAAC,CAAC6L,UAAF,CAAalL,qBAAqB,CAACX,CAAD,EAAI4K,KAAJ,CAAlC;AACH,GAHsB,EAIvB,CAACA,KAAD,CAJuB,CAA3B;AAMA,sBACI,uDACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAE7K;AAAlB,IADJ,EAEK4B,QAFL,CADJ;AAMH;;ACZM,SAASmK,MAAT,OAAuD;AAAA,MAArC9L,CAAqC,QAArCA,CAAqC;AAAA,MAAlCyG,CAAkC,QAAlCA,CAAkC;AAAA,MAA/BC,CAA+B,QAA/BA,CAA+B;AAAA,MAA5BqF,IAA4B,QAA5BA,IAA4B;AAAA,MAAtBpK,QAAsB,QAAtBA,QAAsB;AAAA,MAATT,KAAS;;AAC1D,MAAMnB,OAAO,GAAG8B,WAAW,CACvB,UAAA7B,CAAC,EAAI;AACDiB,IAAAA,iBAAiB,CAACC,KAAD,EAAQlB,CAAR,CAAjB;AACAA,IAAAA,CAAC,CAACgM,MAAF,OAAAhM,CAAC,qBAAWW,qBAAqB,CAACX,CAAD,EAAIyG,CAAJ,EAAOC,CAAP,EAAUqF,IAAV,CAAhC,EAAD;AACH,GAJsB,EAKvB,CAAC7K,KAAD,EAAQuF,CAAR,EAAWC,CAAX,EAAcqF,IAAd,CALuB,CAA3B;AAQA,sBACI,uDACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEhM;AAAlB,IADJ,EAEK4B,QAFL,CADJ;AAMH;;ACfM,SAASsK,OAAT,OAAiE;AAAA,MAA9CjM,CAA8C,QAA9CA,CAA8C;AAAA,MAA3CyG,CAA2C,QAA3CA,CAA2C;AAAA,MAAxCC,CAAwC,QAAxCA,CAAwC;AAAA,MAArCC,KAAqC,QAArCA,KAAqC;AAAA,MAA9BC,MAA8B,QAA9BA,MAA8B;AAAA,MAAtBjF,QAAsB,QAAtBA,QAAsB;AAAA,MAATT,KAAS;;AACpE,MAAMnB,OAAO,GAAG8B,WAAW,CACvB,UAAA7B,CAAC,EAAI;AACDiB,IAAAA,iBAAiB,CAACC,KAAD,EAAQlB,CAAR,CAAjB;AACAA,IAAAA,CAAC,CAACkM,OAAF,OAAAlM,CAAC,qBAAYW,qBAAqB,CAACX,CAAD,EAAIyG,CAAJ,EAAOC,CAAP,EAAUC,KAAV,EAAiBC,MAAjB,CAAjC,EAAD;AACH,GAJsB,EAKvB,CAAC1F,KAAD,EAAQuF,CAAR,EAAWC,CAAX,EAAcC,KAAd,EAAqBC,MAArB,CALuB,CAA3B;AAOA,sBACI,uDACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAE7G;AAAlB,IADJ,EAEK4B,QAFL,CADJ;AAMH;;ACdM,SAASwK,IAAT,OAAmD;AAAA,MAAnCnM,CAAmC,QAAnCA,CAAmC;AAAA,MAAhCoM,IAAgC,QAAhCA,IAAgC;AAAA,MAA1BC,EAA0B,QAA1BA,EAA0B;AAAA,MAAtB1K,QAAsB,QAAtBA,QAAsB;AAAA,MAATT,KAAS;;AACtD,MAAMnB,OAAO,GAAG8B,WAAW,CACvB,UAAA7B,CAAC,EAAI;AACDiB,IAAAA,iBAAiB,CAACC,KAAD,EAAQlB,CAAR,CAAjB;AACAA,IAAAA,CAAC,CAACsM,IAAF,OAAAtM,CAAC,qBAASW,qBAAqB,CAACX,CAAD,EAAIoM,IAAJ,EAAUC,EAAV,CAArB,CAAmCE,IAAnC,EAAT,EAAD;AACH,GAJsB,EAKvB,CAACrL,KAAD,EAAQkL,IAAR,EAAcC,EAAd,CALuB,CAA3B;AAOA,sBACI,uDACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEtM;AAAlB,IADJ,EAEK4B,QAFL,CADJ;AAMH;;ACdM,SAAS6K,KAAT,OAAgD;AAAA,MAA/BxM,CAA+B,QAA/BA,CAA+B;AAAA,MAA5ByG,CAA4B,QAA5BA,CAA4B;AAAA,MAAzBC,CAAyB,QAAzBA,CAAyB;AAAA,MAAtB/E,QAAsB,QAAtBA,QAAsB;AAAA,MAATT,KAAS;;AACnD,MAAMnB,OAAO,GAAG8B,WAAW,CACvB,UAAA7B,CAAC,EAAI;AACDiB,IAAAA,iBAAiB,CAACC,KAAD,EAAQlB,CAAR,CAAjB;AACAA,IAAAA,CAAC,CAACyM,KAAF,OAAAzM,CAAC,qBAAUW,qBAAqB,CAACX,CAAD,EAAIyG,CAAJ,EAAOC,CAAP,CAA/B,EAAD;AACH,GAJsB,EAKvB,CAACxF,KAAD,EAAQuF,CAAR,EAAWC,CAAX,CALuB,CAA3B;AAOA,sBACI,uDACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAE3G;AAAlB,IADJ,EAEK4B,QAFL,CADJ;AAMH;;ACdM,SAAS+K,MAAT,OAAuD;AAAA,MAArC1M,CAAqC,QAArCA,CAAqC;AAAA,MAAlCyG,CAAkC,QAAlCA,CAAkC;AAAA,MAA/BC,CAA+B,QAA/BA,CAA+B;AAAA,MAA5BqF,IAA4B,QAA5BA,IAA4B;AAAA,MAAtBpK,QAAsB,QAAtBA,QAAsB;AAAA,MAATT,KAAS;;AAC1D,MAAMnB,OAAO,GAAG8B,WAAW,CACvB,UAAA7B,CAAC,EAAI;AACDiB,IAAAA,iBAAiB,CAACC,KAAD,EAAQlB,CAAR,CAAjB;AACAA,IAAAA,CAAC,CAAC2M,MAAF,OAAA3M,CAAC,qBAAWW,qBAAqB,CAACX,CAAD,EAAIyG,CAAJ,EAAOC,CAAP,EAAUqF,IAAV,CAAhC,EAAD;AACH,GAJsB,EAKvB,CAAC7K,KAAD,EAAQuF,CAAR,EAAWC,CAAX,EAAcqF,IAAd,CALuB,CAA3B;AAQA,sBACI,uDACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEhM;AAAlB,IADJ,EAEK4B,QAFL,CADJ;AAMH;;;;"}