{"version":3,"sources":["components/Body/index.jsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","models/index.js","pages/Body.jsx","../../src/Command.jsx","../../src/utils/handleValueOrFunction.js","../../src/utils/handleCommonProps.js","../../src/PushPop.jsx","../../src/Debug.jsx","../../src/RenderContext.jsx","../../src/P5.jsx","../../src/Layer.jsx","../../src/Mask.jsx","../../src/Canvas.jsx","../../src/shapes/Rectangle.jsx","../../src/LinearGradient.jsx","../../src/Body.jsx","../../src/shapes/Arc.jsx","../../src/shapes/Background.jsx","../../src/shapes/Circle.jsx","../../src/shapes/Line.jsx"],"names":["Body","model","position","x","y","size","fill","noStroke","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","BouncingObject","p","initialPosition","this","createVector","width","height","vel","gravity","add","applyForce","mult","RandomPathObject","random","SmileyFacePage","useState","debug","setDebug","canvasOptions","useMemo","clearOnDraw","bouncing","useCallback","o","setModel","onClick","d","type","id","checked","onChange","htmlFor","style","marginBottom","options","className","Command","command","renderContext","useContext","commandIndex","useRef","useEffect","clear","handleValueOrFunction","values","returnValue","value","handleCommonProps","applyProp","propName","Array","PushPop","children","push","pop","Debug","ctx","frameRateHistory","displayDebugInfo","fr","Math","avgFr","total","text","P5RenderContext","createContext","RenderContextProvider","step","p5Instance","defineCommandFactory","getOptions","api","defineCommand","rootP5Instance","Setup","SETUP","Draw","DRAW","p5","P5Context","useP5","context","root","draw","useDraw","DEFAULT_OPTIONS","frameRate","P5","setP5Instance","__ready","commands","setTimeout","getCommands","idx","handler","index","c","EMPTY_ARRAY","Layer","autoClear","blendMode","opacity","filters","isStatic","applyFunction","layerImage","setLayerImage","pg","applyCallbacks","applyLayer","doApply","content","contentToApply","copyParams","cb","applyFilters","filter","applyAutoClear","createLayer","console","Mask","mask","layer","parentLayer","parentImg","Canvas","renderer","rp","canvasContainerRef","canvas","ref","Rectangle","FullCanvasRectangle","LinearGradient","colors","angle","angleMode","params","angleInDegrees","endVectorAngle","startVector","endVector","gradient","stop","_model","objectState","setObjectState","state","current","Arc","start","Background","color","Circle","Line","from","to"],"mappings":"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","file":"static/js/body.138e9397.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Circle, Body as P5Body } from 'p5-react';\r\n\r\nexport function Body({ model }) {\r\n    return (\r\n        <>\r\n            <P5Body model={model}>\r\n                {({ position }) => (\r\n                    <Circle\r\n                        x={position.x}\r\n                        y={position.y}\r\n                        size={50}\r\n                        fill={[255, 0, 0]}\r\n                        noStroke\r\n                    />\r\n                )}\r\n            </P5Body>\r\n        </>\r\n    );\r\n}\r\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export class BouncingObject {\r\n    constructor(p, initialPosition) {\r\n        this.position =\r\n            initialPosition || p.createVector(p.width / 2, p.height / 2);\r\n        this.vel = p.createVector(0, 0);\r\n        this.gravity = p.createVector(0, 1);\r\n    }\r\n\r\n    applyForce() {\r\n        this.vel.add(this.gravity);\r\n        this.position.add(this.vel);\r\n    }\r\n\r\n    update(p) {\r\n        this.applyForce();\r\n        if (this.position.y > p.height) {\r\n            this.position.y = p.height;\r\n            this.vel = this.vel.mult(-1);\r\n        }\r\n    }\r\n}\r\n\r\nexport class RandomPathObject {\r\n    constructor(p, initialPosition) {\r\n        this.position =\r\n            initialPosition || p.createVector(p.width / 2, p.height / 2);\r\n    }\r\n\r\n    update(p) {\r\n        this.position.x += p.random(-3, 3);\r\n        this.position.y += p.random(-3, 3);\r\n        if (this.position.x < 0) {\r\n            this.position.x += p.width;\r\n        } else if (this.position.x > p.width) {\r\n            this.position.x -= p.width;\r\n        } else if (this.position.y < 0) {\r\n            this.position.y += p.height;\r\n        } else if (this.position.y > p.height) {\r\n            this.position.y -= p.height;\r\n        }\r\n    }\r\n}\r\n","import React, { useState, useCallback, useMemo } from 'react';\r\nimport { P5, Canvas, Setup, Draw } from 'p5-react';\r\nimport { Body } from '../components/Body';\r\nimport { BouncingObject, RandomPathObject } from '../models';\r\n\r\nexport default function SmileyFacePage() {\r\n    const [debug, setDebug] = useState(false);\r\n    const canvasOptions = useMemo(\r\n        () => ({\r\n            clearOnDraw: true,\r\n            debug,\r\n            // frameRate: 1,\r\n        }),\r\n        [debug]\r\n    );\r\n    const bouncing = useCallback(\r\n        (p, o) => new BouncingObject(p, o && o.position),\r\n        []\r\n    );\r\n    const random = useCallback(\r\n        (p, o) => new RandomPathObject(p, o && o.position),\r\n        []\r\n    );\r\n\r\n    const [model, setModel] = useState(() => bouncing);\r\n    const toggleDebug = () => setDebug(d => !d);\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <button onClick={toggleDebug}>\r\n                    DEBUG: {debug ? 'ON' : 'OFF'}\r\n                </button>\r\n                <div>\r\n                    <input\r\n                        type=\"radio\"\r\n                        id=\"bouncing\"\r\n                        checked={model === bouncing}\r\n                        onChange={() => setModel(() => bouncing)}\r\n                    />\r\n                    <label htmlFor=\"bouncing\">Bouncing ball</label>\r\n                </div>\r\n                <div style={{ marginBottom: '.5em' }}>\r\n                    <input\r\n                        type=\"radio\"\r\n                        id=\"random\"\r\n                        checked={model === random}\r\n                        onChange={() => setModel(() => random)}\r\n                    />\r\n                    <label htmlFor=\"random\">Ball moving randomly</label>\r\n                </div>\r\n            </div>\r\n            <P5 options={canvasOptions} className=\"canvas\">\r\n                <Setup>\r\n                    <Canvas width={500} height={500} className=\"canvas\" />\r\n                </Setup>\r\n                <Draw>\r\n                    <Body model={model} />\r\n                </Draw>\r\n            </P5>\r\n        </>\r\n    );\r\n}\r\n","import { useContext, useRef, useEffect } from 'react';\r\nimport { P5RenderContext } from './RenderContext';\r\n\r\nexport const Command = ({ command, p }) => {\r\n    const renderContext = useContext(P5RenderContext);\r\n    const commandIndex = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const clear = renderContext.defineCommand(\r\n            command,\r\n            () => p || renderContext.p5Instance,\r\n            commandIndex.current\r\n        );\r\n        return () => {\r\n            commandIndex.current = clear();\r\n        };\r\n    }, [command, p, renderContext]);\r\n    return null;\r\n};\r\n","export const handleValueOrFunction = (p, ...values) => {\r\n    const returnValue = values.map(value =>\r\n        typeof value === 'function' ? value(p) : value\r\n    );\r\n\r\n    if (returnValue.length <= 1) return returnValue[0];\r\n    return returnValue;\r\n};\r\n","import { handleValueOrFunction } from './handleValueOrFunction';\r\n\r\nexport function handleCommonProps(props, p) {\r\n    const applyProp = propName => {\r\n        if (!props.hasOwnProperty(propName)) return;\r\n        const value = handleValueOrFunction(p, props[propName]);\r\n\r\n        if (Array.isArray(value)) p[propName](...value);\r\n        else p[propName](value);\r\n    };\r\n\r\n    if (props.noFill) p.noFill();\r\n    if (props.noStroke) p.noStroke();\r\n\r\n    applyProp('ellipseMode');\r\n    applyProp('rectMode');\r\n    applyProp('angleMode');\r\n    applyProp('colorMode');\r\n\r\n    applyProp('fill');\r\n    applyProp('stroke');\r\n\r\n    applyProp('strokeJoin');\r\n    applyProp('strokeCap');\r\n    applyProp('strokeWeight');\r\n\r\n    applyProp('translate');\r\n    applyProp('rotate');\r\n    applyProp('scale');\r\n    applyProp('shearX');\r\n    applyProp('shearY');\r\n    applyProp('applyMatrix');\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from './Command';\r\nimport { handleCommonProps } from './utils/handleCommonProps';\r\n\r\nexport function PushPop({ children, ...props }) {\r\n    const push = useCallback(\r\n        p => {\r\n            p.push();\r\n            handleCommonProps(props, p);\r\n        },\r\n        [props]\r\n    );\r\n\r\n    const pop = useCallback(p => {\r\n        p.pop();\r\n    }, []);\r\n    return (\r\n        <>\r\n            <Command command={push} />\r\n            {children}\r\n            <Command command={pop} />\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback, useContext, useRef } from 'react';\r\nimport { P5Context } from './P5';\r\nimport { Command } from './Command';\r\nimport { PushPop } from './PushPop';\r\n\r\nexport function Debug() {\r\n    const ctx = useContext(P5Context);\r\n    const frameRateHistory = useRef([]);\r\n\r\n    const displayDebugInfo = useCallback(\r\n        p => {\r\n            p.fill(0, 80);\r\n            p.noStroke();\r\n            p.rect(0, 0, 185, 95);\r\n\r\n            p.fill(255);\r\n            p.textFont('Courier');\r\n            p.textLeading(20);\r\n            const fr = Math.round(p.frameRate());\r\n            const avgFr =\r\n                frameRateHistory.current.reduce(\r\n                    (total, curr) => total + curr,\r\n                    0\r\n                ) / frameRateHistory.current.length;\r\n            frameRateHistory.current.push(fr);\r\n            if (fr > 200) fr.shift();\r\n            const text = `Current frame rate: ${fr}\r\nAverage frame rate: ${Math.round(avgFr)}\r\nSetup commands: ${ctx.getCommands().setup.length}\r\nDraw commands: ${ctx.getCommands().draw.length}\r\n        `;\r\n            p.text(text, 8, 18);\r\n        },\r\n        [ctx]\r\n    );\r\n\r\n    return (\r\n        <PushPop>\r\n            <Command command={displayDebugInfo} />\r\n        </PushPop>\r\n    );\r\n}\r\n","import React, { createContext, useContext } from 'react';\r\nimport { Debug } from './Debug';\r\nimport { SETUP, DRAW, P5Context } from './P5';\r\nexport const P5RenderContext = createContext(null);\r\n\r\nexport const RenderContextProvider = ({ step, children }) => {\r\n    const { p5Instance, defineCommandFactory, getOptions } = useContext(\r\n        P5Context\r\n    );\r\n    const api = {\r\n        defineCommand: defineCommandFactory(step),\r\n        rootP5Instance: p5Instance,\r\n        p5Instance,\r\n        getOptions,\r\n    };\r\n\r\n    if (!p5Instance) return null;\r\n\r\n    return (\r\n        <P5RenderContext.Provider value={api}>\r\n            {children}\r\n        </P5RenderContext.Provider>\r\n    );\r\n};\r\n\r\nexport const Setup = ({ children }) => {\r\n    return (\r\n        <RenderContextProvider step={SETUP}>{children}</RenderContextProvider>\r\n    );\r\n};\r\nexport const Draw = ({ children }) => {\r\n    const { getOptions } = useContext(P5Context);\r\n    return (\r\n        <RenderContextProvider step={DRAW}>\r\n            {children}\r\n            {getOptions().debug && <Debug />}\r\n        </RenderContextProvider>\r\n    );\r\n};\r\n","import React, {\r\n    useRef,\r\n    useMemo,\r\n    useState,\r\n    useEffect,\r\n    createContext,\r\n    useContext,\r\n} from 'react';\r\nimport p5 from 'p5';\r\nimport { P5RenderContext } from './RenderContext';\r\n\r\np5.disableFriendlyErrors = true;\r\nexport const SETUP = 'setup';\r\nexport const DRAW = 'draw';\r\nexport const PRELOAD = 'preload';\r\n\r\nexport const P5Context = createContext(null);\r\n\r\nexport const useP5 = () => {\r\n    const context = useContext(P5RenderContext);\r\n    return {\r\n        p: context.p5Instance,\r\n        root: context.rootP5Instance,\r\n        draw: context.defineCommand,\r\n    };\r\n};\r\n\r\nexport const useDraw = command => {\r\n    const { draw } = useP5();\r\n\r\n    useEffect(() => {\r\n        const clear = draw(command);\r\n        return () => clear();\r\n    }, [draw, command]);\r\n};\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    clearOnDraw: false,\r\n    frameRate: 60,\r\n    debug: false,\r\n};\r\n\r\nexport const P5 = ({ options, children, ...props }) => {\r\n    const [p5Instance, setP5Instance] = useState(null);\r\n    const __ready = useRef(false);\r\n    const canvasOptions = useMemo(() => ({ ...DEFAULT_OPTIONS, ...options }), [\r\n        options,\r\n    ]);\r\n    const commands = useRef({\r\n        [SETUP]: [],\r\n        [DRAW]: [],\r\n        [PRELOAD]: [],\r\n    });\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (p5Instance) p5Instance.remove();\r\n        };\r\n    }, [p5Instance]);\r\n\r\n    useEffect(() => {\r\n        if (!p5Instance) {\r\n            setP5Instance(\r\n                new p5(p => {\r\n                    p.__id = 'ROOT';\r\n\r\n                    p.setup = () => {\r\n                        p.frameRate(canvasOptions.frameRate);\r\n                        // Basically I don't understand why I need to do this...\r\n                        // When Loading the component containing the sketch asynchronously via React.lazy(),\r\n                        // the setup function is executed before the <Commands /> inside <Setup /> had time to define the commands\r\n                        // There is probably a better workaround, but this will do for now...\r\n                        setTimeout(() => {\r\n                            commands.current[SETUP].forEach(command =>\r\n                                command()\r\n                            );\r\n                            __ready.current = true;\r\n                        });\r\n                    };\r\n\r\n                    p.draw = () => {\r\n                        if (__ready.current !== true) return;\r\n                        if (canvasOptions.clearOnDraw) {\r\n                            p.clear();\r\n                        }\r\n                        commands.current[DRAW].forEach(command => {\r\n                            command();\r\n                        });\r\n                    };\r\n                })\r\n            );\r\n        }\r\n    }, [canvasOptions.clearOnDraw, canvasOptions.frameRate, p5Instance]);\r\n\r\n    const api = {\r\n        p5Instance,\r\n        getOptions: () => canvasOptions,\r\n        getCommands: () => commands.current,\r\n        defineCommandFactory: key => (command, ctx = p5Instance, idx) => {\r\n            if (typeof idx !== 'number') {\r\n                idx = commands.current[key].length;\r\n            }\r\n\r\n            const handler = () => {\r\n                return command(typeof ctx === 'function' ? ctx() : ctx);\r\n            };\r\n            handler.__type = command.__type;\r\n            if (commands.current[key].length <= 0) {\r\n                commands.current[key].push(handler);\r\n            } else {\r\n                commands.current[key].splice(idx, 0, handler);\r\n            }\r\n            return () => {\r\n                const index = commands.current[key].indexOf(handler);\r\n                commands.current[key] = commands.current[key].filter(\r\n                    c => c !== handler\r\n                );\r\n                return index;\r\n            };\r\n        },\r\n    };\r\n\r\n    return <P5Context.Provider value={api}>{children}</P5Context.Provider>;\r\n};\r\n","import React, {\r\n    useState,\r\n    useEffect,\r\n    useRef,\r\n    useContext,\r\n    useCallback,\r\n} from 'react';\r\nimport { Command } from './Command';\r\nimport { P5RenderContext } from './RenderContext';\r\nimport { handleValueOrFunction } from './utils/handleValueOrFunction';\r\nconst EMPTY_ARRAY = Object.freeze([]);\r\n\r\nexport function Layer({\r\n    autoClear = true,\r\n    children = null,\r\n    blendMode = 'BLEND',\r\n    opacity,\r\n    filters = EMPTY_ARRAY,\r\n    isStatic = false,\r\n    applyFunction,\r\n    x = 0,\r\n    y = 0,\r\n    width = p => p.width,\r\n    height = p => p.height,\r\n    id,\r\n}) {\r\n    const [layerImage, setLayerImage] = useState(null);\r\n    const pg = useRef(null);\r\n    const applyCallbacks = useRef([]);\r\n    const ctx = useContext(P5RenderContext);\r\n\r\n    useEffect(() => {\r\n        if (isStatic) {\r\n            setLayerImage(null);\r\n        }\r\n    }, [children, opacity, blendMode, isStatic]);\r\n\r\n    const api = {\r\n        ...ctx,\r\n        get p5Instance() {\r\n            return pg.current;\r\n        },\r\n    };\r\n\r\n    const applyLayer = useCallback(() => {\r\n        const p = ctx.p5Instance;\r\n        const doApply = content => {\r\n            p.blendMode(p[blendMode]);\r\n            // only tint if needed because it is a costly operation\r\n            if (opacity) {\r\n                p.tint(255, opacity);\r\n            }\r\n            p.image(\r\n                content,\r\n                handleValueOrFunction(p, x),\r\n                handleValueOrFunction(p, y),\r\n                handleValueOrFunction(p, width),\r\n                handleValueOrFunction(p, height)\r\n            );\r\n        };\r\n\r\n        if (layerImage && isStatic) {\r\n            doApply(layerImage);\r\n            return;\r\n        }\r\n        if (!pg.current || pg.current.width <= 0 || pg.current.height <= 0) {\r\n            return;\r\n        }\r\n\r\n        pg.current.mouseX = p.mouseX + handleValueOrFunction(p, x);\r\n        pg.current.mouseY = p.mouseY + handleValueOrFunction(p, y);\r\n\r\n        let contentToApply = pg.current;\r\n\r\n        if (applyCallbacks.current.length > 0) {\r\n            const copyParams = [0, 0, pg.current.width, pg.current.height];\r\n            contentToApply = p.createImage(pg.current.width, pg.current.height);\r\n            contentToApply.copy(pg.current, ...copyParams, ...copyParams);\r\n            applyCallbacks.current.forEach(cb =>\r\n                cb(pg.current, contentToApply)\r\n            );\r\n        }\r\n\r\n        if (applyFunction) applyFunction(pg.current);\r\n        else doApply(contentToApply);\r\n\r\n        if (isStatic) {\r\n            setLayerImage(contentToApply);\r\n        }\r\n    }, [\r\n        ctx.p5Instance,\r\n        layerImage,\r\n        isStatic,\r\n        applyFunction,\r\n        blendMode,\r\n        opacity,\r\n        x,\r\n        y,\r\n        width,\r\n        height,\r\n    ]);\r\n\r\n    const applyFilters = useCallback(() => {\r\n        if (!pg.current) return;\r\n        filters.forEach(filter => {\r\n            if (Array.isArray(filter)) {\r\n                pg.current.filter(...filter);\r\n            } else {\r\n                pg.current.filter(filter);\r\n            }\r\n        });\r\n    }, [filters]);\r\n\r\n    const applyAutoClear = useCallback(() => {\r\n        if (!pg.current) return;\r\n        pg.current.clear();\r\n    }, []);\r\n\r\n    const createLayer = useCallback(\r\n        p => {\r\n            if (!pg.current) {\r\n                pg.current = ctx.rootP5Instance.createGraphics(\r\n                    handleValueOrFunction(ctx.rootP5Instance, width),\r\n                    handleValueOrFunction(ctx.rootP5Instance, height)\r\n                );\r\n                pg.current.on = (event, cb) => {\r\n                    switch (event) {\r\n                        case 'apply':\r\n                            applyCallbacks.current.push(cb);\r\n                            return () => {\r\n                                applyCallbacks.current.splice(\r\n                                    applyCallbacks.current.indexOf(cb),\r\n                                    1\r\n                                );\r\n                            };\r\n                        default:\r\n                            console.error('Unknow layer event', event);\r\n                    }\r\n                };\r\n            }\r\n            pg.current.__isLayer = true;\r\n            pg.current.__id = id;\r\n        },\r\n        [ctx.rootP5Instance, height, id, width]\r\n    );\r\n\r\n    return (\r\n        <P5RenderContext.Provider value={api}>\r\n            <>\r\n                {!layerImage && <Command command={createLayer} />}\r\n                {!layerImage && autoClear && (\r\n                    <Command command={applyAutoClear} />\r\n                )}\r\n                {!layerImage && children}\r\n                {!layerImage && filters.length > 0 && (\r\n                    <Command command={applyFilters} />\r\n                )}\r\n                <Command command={applyLayer} />\r\n            </>\r\n        </P5RenderContext.Provider>\r\n    );\r\n}\r\n","import React, { useRef, useCallback, useContext } from 'react';\r\nimport { P5RenderContext } from './RenderContext';\r\nimport { Layer } from './Layer';\r\n\r\nexport function Mask({ id, children, ...props }) {\r\n    const ctx = useContext(P5RenderContext);\r\n    const mask = useRef(null);\r\n\r\n    const applyFunction = useCallback(\r\n        layer => {\r\n            const apply = (parentLayer, parentImg) => {\r\n                parentImg.mask(layer);\r\n            };\r\n            if (mask.current) mask.current();\r\n            mask.current = ctx.p5Instance.on('apply', apply);\r\n        },\r\n        [ctx.p5Instance]\r\n    );\r\n\r\n    return (\r\n        <Layer id={id} applyFunction={applyFunction} {...props}>\r\n            {children}\r\n        </Layer>\r\n    );\r\n}\r\n","import React, { useRef, useCallback, useContext } from 'react';\r\nimport { Command } from './Command';\r\nimport { P5RenderContext } from './RenderContext';\r\n\r\nexport function Canvas({\r\n    width,\r\n    height,\r\n    renderer = 'P2D',\r\n    children,\r\n    ...props\r\n}) {\r\n    const { rootP5Instance: rp } = useContext(P5RenderContext);\r\n    const canvasContainerRef = useRef(null);\r\n    const command = useCallback(() => {\r\n        const canvas = rp.createCanvas(width, height, renderer);\r\n        console.log('create canvas');\r\n        canvas.parent(canvasContainerRef.current);\r\n    }, [height, renderer, rp, width]);\r\n\r\n    return (\r\n        <>\r\n            <div ref={canvasContainerRef} {...props} />\r\n            <Command command={command}>{children}</Command>\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Rectangle({ p, x, y, width, height, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.rect(...handleValueOrFunction(p, x, y, width, height));\r\n        },\r\n        [props, x, y, width, height]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback, useContext } from 'react';\r\nimport { Command } from './Command';\r\nimport { P5RenderContext } from './RenderContext';\r\nimport { Rectangle } from './shapes/Rectangle';\r\nimport { PushPop } from './PushPop';\r\nimport { handleCommonProps } from './utils/handleCommonProps';\r\nimport { handleValueOrFunction } from './utils/handleValueOrFunction';\r\nimport p5 from 'p5';\r\n\r\nconst FullCanvasRectangle = () => (\r\n    <Rectangle\r\n        x={0}\r\n        y={0}\r\n        width={p => p.width}\r\n        height={p => p.height}\r\n        noStroke\r\n    />\r\n);\r\nexport function LinearGradient({\r\n    x = 0,\r\n    y = 0,\r\n    width,\r\n    height,\r\n    colors = ['black', 'white'],\r\n    angle,\r\n    angleMode,\r\n    children,\r\n    ...props\r\n}) {\r\n    const { rootP5Instance: rp } = useContext(P5RenderContext);\r\n\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            const params = {\r\n                x: handleValueOrFunction(rp, x),\r\n                y: handleValueOrFunction(rp, y),\r\n                width: handleValueOrFunction(rp, width) || p.width,\r\n                height: handleValueOrFunction(rp, height) || p.height,\r\n                angle: handleValueOrFunction(rp, angle) || 0,\r\n                angleMode: handleValueOrFunction(rp, angleMode) || p.RADIANS,\r\n                colors: handleValueOrFunction(rp, ...colors),\r\n            };\r\n\r\n            if (params.angleMode !== p.RADIANS) {\r\n                params.angle = p.radians(params.angle);\r\n            }\r\n            p.push();\r\n            p.angleMode(p.DEGREES);\r\n            let angleInDegrees = p.degrees(params.angle) % 360;\r\n            let endVectorAngle = p.degrees(params.angle) % 180;\r\n\r\n            if (endVectorAngle > 45 && endVectorAngle <= 90) {\r\n                endVectorAngle = 90 - endVectorAngle;\r\n            } else if (endVectorAngle > 90 && endVectorAngle <= 135) {\r\n                endVectorAngle -= 90;\r\n            } else if (endVectorAngle > 135 && endVectorAngle <= 180) {\r\n                endVectorAngle = 90 - (endVectorAngle - 90);\r\n            }\r\n\r\n            const startVector = p.createVector(params.x, params.y);\r\n            const endVector = p5.Vector.fromAngle(params.angle);\r\n\r\n            endVector.setMag(params.width / p.sin(90 - endVectorAngle));\r\n            if (angleInDegrees > 270) {\r\n                startVector.y += params.height;\r\n                endVector.y += params.height;\r\n            } else if (angleInDegrees > 180) {\r\n                startVector.x += params.width;\r\n                endVector.x += params.width;\r\n                startVector.y += params.height;\r\n                endVector.y += params.height;\r\n            } else if (angleInDegrees > 90) {\r\n                startVector.x += params.width;\r\n                endVector.x += params.width;\r\n            }\r\n            p.pop();\r\n            const gradient = p.drawingContext.createLinearGradient(\r\n                startVector.x,\r\n                startVector.y,\r\n                params.x + endVector.x,\r\n                params.y + endVector.y\r\n            );\r\n            params.colors.forEach((color, i) => {\r\n                const stop = i / (params.colors.length - 1);\r\n                gradient.addColorStop(stop, p.color(color).toString());\r\n            });\r\n            p.drawingContext.fillStyle = gradient;\r\n\r\n            // UNCOMMENT TO DEBUG\r\n            // p.push();\r\n            // p.rect(0, 0, p.width, p.height);\r\n            // p.fill(0);\r\n            // p.text(`angle: ${Math.round(p.degrees(params.angle))}`, 15, 15);\r\n            // p.noFill();\r\n            // p.stroke(128);\r\n            // p.rect(params.x, params.y, params.width, params.height);\r\n            // p.rectMode(p.CORNERS);\r\n            // p.stroke(255);\r\n            // p.line(\r\n            //     startVector.x,\r\n            //     startVector.y,\r\n            //     params.x + endVector.x,\r\n            //     params.y + endVector.y\r\n            // );\r\n            // p.pop();\r\n        },\r\n        [props, rp, x, y, width, height, angle, angleMode, colors]\r\n    );\r\n\r\n    return (\r\n        <PushPop>\r\n            <Command command={command} />\r\n            {children || <FullCanvasRectangle />}\r\n        </PushPop>\r\n    );\r\n}\r\n","import React, { useRef, useState, useEffect, useCallback } from 'react';\r\nimport { Command } from './Command';\r\nimport { useP5 } from './P5';\r\n\r\nexport function Body({ model, children }) {\r\n    const { p } = useP5();\r\n    const _model = useRef(null);\r\n    const [objectState, setObjectState] = useState(null);\r\n\r\n    const command = useCallback(\r\n        p => {\r\n            if (objectState) {\r\n                _model.current.update(p);\r\n                setObjectState({ state: _model.current });\r\n            }\r\n        },\r\n        [objectState]\r\n    );\r\n\r\n    useEffect(() => {\r\n        // We need to wait for the next tick before initializing the model\r\n        // This is because it could happend that setup commands such as createCanvas have not been run yet, potentially forwarding wrong values into the model\r\n        if (!_model.current) {\r\n            setTimeout(() => {\r\n                _model.current = model(p, _model.current);\r\n                setObjectState({ state: _model.current });\r\n            });\r\n        } else {\r\n            _model.current = model(p, _model.current);\r\n            setObjectState({ state: _model.current });\r\n        }\r\n    }, [model, p]);\r\n\r\n    return (\r\n        <>\r\n            <Command command={command}></Command>\r\n            {objectState && children(objectState.state)}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Arc({\r\n    p,\r\n    x,\r\n    y,\r\n    height,\r\n    width,\r\n    start,\r\n    stop,\r\n    children,\r\n    ...props\r\n}) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.arc(\r\n                ...handleValueOrFunction(p, x, y, width, height, start, stop)\r\n            );\r\n        },\r\n        [props, x, y, width, height, start, stop]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Background({ color, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            p.background(handleValueOrFunction(p, color));\r\n        },\r\n        [color]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Circle({ p, x, y, size, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.circle(...handleValueOrFunction(p, x, y, size));\r\n        },\r\n        [props, x, y, size]\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Line({ p, from, to, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.line(...handleValueOrFunction(p, from, to).flat());\r\n        },\r\n        [props, from, to]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n"],"sourceRoot":""}