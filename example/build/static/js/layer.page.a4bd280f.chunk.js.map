{"version":3,"sources":["pages/Layer.jsx","../../src/Command.jsx","../../src/utils/handleValueOrFunction.js","../../src/utils/handleCommonProps.js","../../src/PushPop.jsx","../../src/Debug.jsx","../../src/RenderContext.jsx","../../src/P5.jsx","../../src/Layer.jsx","../../src/Mask.jsx","../../src/Canvas.jsx","../../src/shapes/Rectangle.jsx","../../src/LinearGradient.jsx","../../src/Body.jsx","../../src/shapes/Arc.jsx","../../src/shapes/Background.jsx","../../src/shapes/Circle.jsx","../../src/shapes/Line.jsx"],"names":["SketchDraw","lineY","useRef","useDraw","p","current","height","color","from","to","width","stroke","strokeWeight","id","autoClear","x","mouseX","y","mouseY","size","fill","noStroke","LayerPage","useState","debug","setDebug","canvasOptions","useMemo","clearOnDraw","onClick","d","options","className","Command","command","renderContext","useContext","commandIndex","useEffect","clear","handleValueOrFunction","values","returnValue","value","handleCommonProps","props","applyProp","propName","Array","PushPop","children","push","useCallback","pop","Debug","ctx","frameRateHistory","displayDebugInfo","fr","Math","avgFr","total","text","P5RenderContext","createContext","RenderContextProvider","step","p5Instance","defineCommandFactory","getOptions","api","defineCommand","rootP5Instance","Setup","SETUP","Draw","DRAW","p5","P5Context","useP5","context","root","draw","DEFAULT_OPTIONS","frameRate","P5","setP5Instance","__ready","commands","setTimeout","getCommands","key","idx","handler","index","c","EMPTY_ARRAY","Object","Layer","blendMode","opacity","filters","isStatic","applyFunction","layerImage","setLayerImage","pg","applyCallbacks","applyLayer","doApply","content","contentToApply","copyParams","cb","applyFilters","filter","applyAutoClear","createLayer","console","Mask","mask","layer","parentLayer","parentImg","Canvas","renderer","rp","canvasContainerRef","canvas","ref","Rectangle","FullCanvasRectangle","LinearGradient","colors","angle","angleMode","params","angleInDegrees","endVectorAngle","startVector","endVector","gradient","stop","i","Body","model","_model","objectState","setObjectState","state","Arc","start","Background","Circle","Line"],"mappings":"+MAaMA,EAAa,WACf,IAAMC,EAAQC,iBAAO,GAMrB,OALAC,aAAQ,SAAAC,GACJH,EAAMI,UACFJ,EAAMI,QAAUD,EAAEE,SAAQL,EAAMI,QAAU,MAI9C,oCACI,kBAAC,IAAD,CAAYE,MAAO,IACnB,kBAAC,IAAD,CACIC,KAAM,SAAAJ,GAAC,MAAI,CAAC,EAAGH,EAAMI,UACrBI,GAAI,SAAAL,GAAC,MAAI,CAACA,EAAEM,MAAOT,EAAMI,UACzBM,OAAQ,CAAC,IAAK,EAAG,GACjBC,aAAc,IAElB,kBAAC,IAAD,CAAOC,GAAG,QAAQC,WAAW,GACzB,kBAAC,IAAD,CACIC,EAAG,SAAAX,GAAC,OAAIA,EAAEY,QACVC,EAAG,SAAAb,GAAC,OAAIA,EAAEc,QACVC,KAAM,GACNC,KAAM,IACNC,UAAQ,OAMb,SAASC,IAAa,IAAD,EACNC,oBAAS,GADH,mBACzBC,EADyB,KAClBC,EADkB,KAE1BC,EAAgBC,mBAClB,iBAAO,CACHC,aAAa,EACbJ,WAGJ,CAACA,IAIL,OACI,oCACI,6BACI,4BAAQK,QALA,kBAAMJ,GAAS,SAAAK,GAAC,OAAKA,OAK7B,UACYN,EAAQ,KAAO,QAG/B,kBAAC,IAAD,CAAIO,QAASL,EAAeM,UAAU,UAClC,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAQtB,MAAO,IAAKJ,OAAQ,IAAK0B,UAAU,WAC3C,kBAAC,IAAD,CAAYzB,MAAO,KAEvB,kBAAC,IAAD,KACI,kBAACP,EAAD,W,qhGC/DPiC,EAAU,SAAC,GAAmB,IAAjBC,EAAiB,EAAjBA,QAAS9B,EAAQ,EAARA,EACzB+B,EAAgBC,qBAAtB,GACMC,EAAenC,iBAArB,MAYA,OAVAoC,qBAAU,WACN,IAAMC,EAAQJ,EAAA,iBAEV,kBAAM/B,GAAK+B,EAAX,aACAE,EAHJ,SAKA,OAAO,WACHA,UAAuBE,OAE5B,CAACL,EAAS9B,EATbkC,IAUA,MCjBSE,EAAwB,SAACpC,GAAiB,2BAAXqC,EAAW,iCAAXA,EAAW,kBACnD,IAAMC,EAAcD,EAAA,KAAW,SAAAE,GAAK,MACf,oBAAVA,EAAuBA,EAA9B,GADgC,KAIpC,OAAID,UAAJ,EAAoCA,EAAP,GAC7B,GCJG,SAASE,EAAkBC,EAAOzC,GACrC,IAAM0C,EAAY,SAAAC,GACd,GAAKF,iBAAL,IACA,IAAMF,EAAQH,EAAsBpC,EAAGyC,EAAvC,IAEIG,cAAJ,GAA0B5C,aAAC,EAA3B,IACKA,UAGLyC,EAAJ,QAAkBzC,WACdyC,EAAJ,UAAoBzC,aAEpB0C,iBACAA,cACAA,eACAA,eAEAA,UACAA,YAEAA,gBACAA,eACAA,kBAEAA,eACAA,YACAA,WACAA,YACAA,YACAA,iBC3BG,SAASG,EAAQ,GAAwB,IAAtBC,EAAsB,EAAtBA,SAAaL,EAAS,kBACtCM,EAAOC,uBACT,SAAAhD,GACIA,SACAwC,EAAkBC,EAAlBD,KAEJ,CALJ,IAQMS,EAAMD,uBAAY,SAAAhD,GACpBA,UADJ,IAGA,OACI,oCACI,qBAAS8B,QAASiB,IADtB,EAGI,qBAASjB,QAASmB,KCfvB,SAASC,IACZ,IAAMC,EAAMnB,qBAAZ,GACMoB,EAAmBtD,iBAAzB,IAEMuD,EAAmBL,uBACrB,SAAAhD,GACIA,aACAA,aACAA,mBAEAA,YACAA,sBACAA,kBACA,IAAMsD,EAAKC,WAAWvD,EAAtB,aACMwD,EACFJ,EAAA,gBACI,qBAAiBK,EAAjB,IADJ,GAGIL,UAJR,OAKAA,kBACIE,EAAJ,KAAcA,UACd,IAAMI,EAAO,uBAAH,0CACAH,WADA,gCAEJJ,sBAFI,mCAGLA,qBAHK,OAAV,cAKAnD,iBAEJ,CAxBJ,IA2BA,OACI,yBACI,qBAAS8B,QAASuB,K,ICnCjBM,EAAkBC,wBAAc,MAEhCC,EAAwB,SAAC,GAAuB,IAArBC,EAAqB,EAArBA,KAAMhB,EAAe,EAAfA,SAAe,EACAd,qBADA,GACjD+B,EADiD,aACrCC,EADqC,uBACfC,EADe,aAInDC,EAAM,CACRC,cAAeH,EADP,GAERI,eAFQ,EAGRL,WAHQ,EAIRE,cAGJ,SAGI,kBAACN,EAAD,UAA0BpB,MAAO2B,GADrC,GAFwB,MASfG,EAAQ,SAAC,GAAiB,IAAfvB,EAAe,EAAfA,SACpB,OACI,qBAAuBgB,KAAMQ,GADjC,IAISC,EAAO,SAAC,GAAiB,IAAfzB,EAAe,EAAfA,SACXmB,EAAejC,qBADW,cAElC,OACI,qBAAuB8B,KAAMU,GAA7B,EAEKP,WAAsB,oBAH/B,QCrBJQ,6BACO,IAAMH,EAAN,QACME,EAAN,OAGME,EAAYd,wBAAc,MAE1Be,EAAQ,WACjB,IAAMC,EAAU5C,qBAAhB,GACA,MAAO,CACHhC,EAAG4E,EADA,WAEHC,KAAMD,EAFH,eAGHE,KAAMF,EAAQT,gBAITpE,EAAU,SAAA+B,GAAW,IACtBgD,EAASH,IADa,KAG9BzC,qBAAU,WACN,IAAMC,EAAQ2C,EAAd,GACA,OAAO,kBAAM3C,OACd,CAAC2C,EAHJ5C,KAME6C,EAAkB,CACpBvD,aADoB,EAEpBwD,UAFoB,GAGpB5D,OAAO,GAGE6D,EAAK,SAAC,GAAoC,MAAlCtD,EAAkC,EAAlCA,QAASmB,EAAyB,EAAzBA,SAAyB,iCACf3B,mBADe,UAC5C4C,EAD4C,KAChCmB,EADgC,KAE7CC,EAAUrF,kBAAhB,GACMwB,EAAgBC,mBAAQ,iCAA4C,CAA1E,IAGM6D,EAAWtF,kBAAM,2BAlCpB,UAkCoB,IAAvB,IAMAoC,qBAAU,WACN,OAAO,WACH,GAAgB6B,cAErB,CAJH7B,IAMAA,qBAAU,WACN,GACIgD,EACI,IAAI,EAAJ,GAAO,SAAAlF,GACHA,cAEAA,QAAU,WACNA,YAAYsB,EADA,WAMZ+D,YAAW,WACPD,sBAAgC,SAAAtD,GAAO,OACnCA,OAEJqD,iBAIRnF,OAAS,YACL,IAAImF,YACA7D,EAAJ,aACItB,UAEJoF,sBAA+B,SAAAtD,GAC3BA,eAMrB,CAACR,EAAD,YAA4BA,EAA5B,UAhCHY,IAkCA,IAAMgC,EAAM,CACRH,WADQ,EAERE,WAAY,qBACZqB,YAAa,kBAAMF,EAAN,SACbpB,qBAAsB,SAAAuB,GAAG,OAAI,YAAoC,IAA1BpC,EAA0B,uDAApBY,EAAYyB,EAAQ,uCAC7D,kBAAWA,IACPA,EAAMJ,aAANI,QAGJ,IAAMC,EAAU,WACZ,OAAO3D,EAAuB,oBAARqB,EAAqBA,IAA3C,IAQJ,OANAsC,SAAiB3D,EAAjB2D,OACIL,qBAAJ,EACIA,qBAEAA,2BAEG,WACH,IAAMM,EAAQN,qBAAd,GAIA,OAHAA,aAAwBA,EAAA,mBACpB,SAAAO,GAAC,OAAIA,IAAJ,KAEL,MAKZ,OAAO,kBAACjB,EAAD,UAAoBnC,MAAO2B,GAAlC,IChHE0B,EAAcC,cAApB,IAEO,SAASC,EAAM,GAanB,QAZCpF,iBAYD,aAXCoC,gBAWD,MAXY,KAWZ,MAVCiD,iBAUD,MAVa,QAUb,EATCC,EASD,EATCA,QASD,IARCC,eAQD,MARWL,EAQX,MAPCM,gBAOD,SANCC,EAMD,EANCA,cAMD,IALCxF,SAKD,MALK,EAKL,MAJCE,SAID,MAJK,EAIL,MAHCP,aAGD,MAHS,SAAAN,GAAC,OAAIA,EAAJ,OAGV,MAFCE,cAED,MAFU,SAAAF,GAAC,OAAIA,EAAJ,QAEX,EADCS,EACD,EADCA,GACD,IACqCU,mBADrC,SACQiF,EADR,KACoBC,EADpB,KAEOC,EAAKxG,iBAAX,MACMyG,EAAiBzG,iBAAvB,IACMqD,EAAMnB,qBAAZ,GAEAE,qBAAU,WACN,GACImE,UAEL,CAACvD,EAAUkD,EAASD,EAJvB7D,IAMA,IAAMgC,EAAM,EAAH,MAEL,iBACI,OAAOoC,EAAP,WAIFE,EAAaxD,uBAAY,WAC3B,IAAMhD,EAAImD,EAAV,WACMsD,EAAU,SAAAC,GACZ1G,YAAYA,EADW,IAGvB,GACIA,cAEJA,UAEIoC,EAAsBpC,EAF1BA,GAGIoC,EAAsBpC,EAH1BA,GAIIoC,EAAsBpC,EAJ1BA,GAKIoC,EAAsBpC,EAL1BA,KASJ,GAAIoG,GAAJ,EACIK,UAGJ,MAAKH,EAAD,SAAeA,iBAAf,GAAwCA,kBAA5C,IAIAA,iBAAoBtG,SAAWoC,EAAsBpC,EAArDsG,GACAA,iBAAoBtG,SAAWoC,EAAsBpC,EAArDsG,GAEA,IAAIK,EAAiBL,EAArB,QAEA,GAAIC,iBAAJ,EAAuC,OAC7BK,EAAa,CAAC,EAAG,EAAGN,UAAP,MAAyBA,UAA5C,SAEA,EADAK,EAAiB3G,cAAcsG,UAAdtG,MAAgCsG,UAAjDK,SACA,cAAoBL,EAApB,sBACAC,mBAA+B,SAAAM,GAAE,OAC7BA,EAAGP,EAAD,QAD2B,MAKrC,EAAmBH,EAAcG,EAAjC,SACKG,KAEL,GACIJ,QAEL,CACClD,EADD,2BA7CH,IA0DM2D,EAAe9D,uBAAY,WACxBsD,EAAL,SACAL,WAAgB,SAAAc,GACe,MAAvBnE,cAAJ,IACI,EAAA0D,EAAA,8BAEAA,yBAGT,CATH,IAWMU,EAAiBhE,uBAAY,WAC1BsD,EAAL,SACAA,oBAFJ,IAKMW,EAAcjE,uBAChB,SAAAhD,GACSsG,EAAL,UACIA,UAAanD,gCACTf,EAAsBe,EAAD,eADZA,GAETf,EAAsBe,EAAD,eAFzBmD,IAIAA,aAAgB,cACZ,UACI,YAEI,OADAC,kBACO,WACHA,iBACIA,kBADJA,OAKR,QACIW,yCAIhBZ,uBACAA,mBAEJ,CAACnD,EAAD,mBAzBJ,IA4BA,OACI,kBAACQ,EAAD,UAA0BpB,MAAO2B,GAC7B,qCACMkC,GAAc,qBAAStE,QAASmF,KAChCb,GAAc1F,GACZ,qBAASoB,QAASkF,KAEpBZ,GALN,GAMMA,GAAcH,SAAf,GACG,qBAASnE,QAASgF,IAEtB,qBAAShF,QAAS0E,MCzJ3B,SAASW,EAAK,GAA4B,IAA1B1G,EAA0B,EAA1BA,GAAIqC,EAAsB,EAAtBA,SAAaL,EAAS,uBACvCU,EAAMnB,qBAAZ,GACMoF,EAAOtH,iBAAb,MAEMqG,EAAgBnD,uBAClB,SAAAqE,GAIQD,EAAJ,SAAkBA,YAClBA,UAAejE,yBAJD,SAACmE,EAAaC,GACxBA,eAKR,CAACpE,EARL,aAWA,OACI,uBAAO1C,GAAP,EAAe0F,cAAeA,GAA9B,GADJ,GCfG,SAASqB,EAAO,GAMpB,IALClH,EAKD,EALCA,MACAJ,EAID,EAJCA,OAID,IAHCuH,gBAGD,MAHY,MAGZ,EAFC3E,EAED,EAFCA,SACGL,EACJ,8CACyBiF,EAAO1F,qBADhC,kBAEO2F,EAAqB7H,iBAA3B,MACMgC,EAAUkB,uBAAY,WACxB,IAAM4E,EAASF,mBAAf,GACAR,6BACAU,SAAcD,EAAdC,WACD,CAAC1H,EAAQuH,EAAUC,EAJtB,IAMA,OACI,oCACI,2BAAKG,IAAKF,GADd,IAEI,qBAAS7F,QAASA,GAH1B,ICdG,SAASgG,EAAU,GAAgD,EAA9C9H,EAA8C,IAA3CW,EAA2C,EAA3CA,EAAGE,EAAwC,EAAxCA,EAAGP,EAAqC,EAArCA,MAAOJ,EAA8B,EAA9BA,OAAQ4C,EAAsB,EAAtBA,SAAaL,EAAS,+CAChEX,EAAUkB,uBACZ,SAAAhD,GACIwC,EAAkBC,EAAlBD,GACAxC,eAAC,EAASoC,EAAsBpC,EAAGW,EAAGE,EAAGP,EAAzCN,OAEJ,CAACyC,EAAO9B,EAAGE,EAAGP,EALlB,IAOA,OACI,oCACI,qBAASwB,QAASA,IAF1B,GCJJ,IAAMiG,EAAsB,kBACxB,qBACIpH,EADJ,EAEIE,EAFJ,EAGIP,MAAO,SAAAN,GAAC,OAAIA,EAAJ,OACRE,OAAQ,SAAAF,GAAC,OAAIA,EAAJ,QACTiB,UAAQ,KAGT,SAAS+G,EAAe,GAU5B,QATCrH,SASD,MATK,EASL,MARCE,SAQD,MARK,EAQL,EAPCP,EAOD,EAPCA,MACAJ,EAMD,EANCA,OAMD,IALC+H,cAKD,MALU,CAAC,QAAS,SAKpB,EAJCC,EAID,EAJCA,MACAC,EAGD,EAHCA,UACArF,EAED,EAFCA,SACGL,EACJ,wEACyBiF,EAAO1F,qBADhC,kBAGOF,EAAUkB,uBACZ,SAAAhD,GACIwC,EAAkBC,EAAlBD,GACA,IAAM4F,EAAS,CACXzH,EAAGyB,EAAsBsF,EADd,GAEX7G,EAAGuB,EAAsBsF,EAFd,GAGXpH,MAAO8B,EAAsBsF,EAAtBtF,IAAoCpC,EAHhC,MAIXE,OAAQkC,EAAsBsF,EAAtBtF,IAAqCpC,EAJlC,OAKXkI,MAAO9F,EAAsBsF,EAAtBtF,IALI,EAMX+F,UAAW/F,EAAsBsF,EAAtBtF,IAAwCpC,EANxC,QAOXiI,OAAQ7F,kCAGRgG,cAAqBpI,EAAzB,UACIoI,QAAepI,UAAUoI,EAAzBA,QAEJpI,SACAA,YAAYA,EAAZA,SACA,IAAIqI,EAAiBrI,UAAUoI,EAAVpI,OAArB,IACIsI,EAAiBtI,UAAUoI,EAAVpI,OAArB,IAEIsI,MAAuBA,GAA3B,GACIA,EAAiB,GAAjBA,EACOA,MAAuBA,GAA3B,IACHA,MACOA,OAAwBA,GAA5B,MACHA,EAAiB,IAAMA,EAAvBA,KAGJ,IAAMC,EAAcvI,eAAeoI,EAAfpI,EAAyBoI,EAA7C,GACMI,EAAY/D,qBAAoB2D,EAAtC,OAEAI,SAAiBJ,QAAepI,MAAM,GAAtCwI,IACIH,EAAJ,KACIE,KAAiBH,EAAjBG,OACAC,KAAeJ,EAAfI,QACOH,EAAJ,KACHE,KAAiBH,EAAjBG,MACAC,KAAeJ,EAAfI,MACAD,KAAiBH,EAAjBG,OACAC,KAAeJ,EAAfI,QACOH,EAAJ,KACHE,KAAiBH,EAAjBG,MACAC,KAAeJ,EAAfI,OAEJxI,QACA,IAAMyI,EAAWzI,sCACbuI,EADavI,EAEbuI,EAFavI,EAGboI,IAAWI,EAHExI,EAIboI,IAAWI,EAJf,GAMAJ,kBAAsB,cAClB,IAAMM,EAAOC,GAAKP,gBAAlB,GACAK,iBAA4BzI,WAA5ByI,eAEJzI,2BAvDC,IA2EL,CAACyC,EAAOiF,EAAI/G,EAAGE,EAAGP,EAAOJ,EAAQgI,EAAOC,EA5E5C,IA+EA,OACI,yBACI,qBAASrG,QAASA,IACjBgB,GAAY,oBAHrB,OC1GG,SAAS8F,EAAK,GAAqB,IAAnBC,EAAmB,EAAnBA,MAAO/F,EAAY,EAAZA,SAClB9C,EAAM2E,IADwB,EAEhCmE,EAAShJ,iBAAf,MAFsC,IAGAqB,mBAHA,SAG/B4H,EAH+B,KAGlBC,EAHkB,KAKhClH,EAAUkB,uBACZ,SAAAhD,GACI,IACI8I,oBACAE,EAAe,CAAEC,MAAOH,EAAO7I,aAGvC,CAPJ,IAwBA,OAdAiC,qBAAU,WAGD4G,EAAL,SAMIA,UAAiBD,EAAM7I,EAAG8I,EAA1BA,SACAE,EAAe,CAAEC,MAAOH,EAAO7I,WAN/BoF,YAAW,WACPyD,UAAiBD,EAAM7I,EAAG8I,EAA1BA,SACAE,EAAe,CAAEC,MAAOH,EAAO7I,eAMxC,CAAC4I,EAZJ3G,IAeI,oCACI,qBAASJ,QAASA,IACjBiH,GAAejG,EAASiG,EAHjC,QC5BG,SAASG,EAAI,GAUjB,EATClJ,EASD,IARCW,EAQD,EARCA,EACAE,EAOD,EAPCA,EACAX,EAMD,EANCA,OACAI,EAKD,EALCA,MACA6I,EAID,EAJCA,MACAT,EAGD,EAHCA,KACA5F,EAED,EAFCA,SACGL,EACJ,8DACOX,EAAUkB,uBACZ,SAAAhD,GACIwC,EAAkBC,EAAlBD,GACAxC,cAAC,EACMoC,EAAsBpC,EAAGW,EAAGE,EAAGP,EAAOJ,EAAQiJ,EADrDnJ,OAIJ,CAACyC,EAAO9B,EAAGE,EAAGP,EAAOJ,EAAQiJ,EAPjC,IASA,OACI,oCACI,qBAASrH,QAASA,IAF1B,GCrBG,SAASsH,EAAW,GAA+B,IAA7BjJ,EAA6B,EAA7BA,MAAO2C,EAAsB,EAAtBA,SAC1BhB,GADgD,0BACtCkB,uBACZ,SAAAhD,GACIA,aAAaoC,EAAsBpC,EAAnCA,MAEJ,CAJJ,KAMA,OACI,oCACI,qBAAS8B,QAASA,IAF1B,GCNG,SAASuH,EAAO,GAAuC,EAArCrJ,EAAqC,IAAlCW,EAAkC,EAAlCA,EAAGE,EAA+B,EAA/BA,EAAGE,EAA4B,EAA5BA,KAAM+B,EAAsB,EAAtBA,SAAaL,EAAS,qCACpDX,EAAUkB,uBACZ,SAAAhD,GACIwC,EAAkBC,EAAlBD,GACAxC,iBAAC,EAAWoC,EAAsBpC,EAAGW,EAAGE,EAAxCb,OAEJ,CAACyC,EAAO9B,EAAGE,EALf,IAQA,OACI,oCACI,qBAASiB,QAASA,IAF1B,GCTG,SAASwH,EAAK,GAAqC,EAAnCtJ,EAAmC,IAAhCI,EAAgC,EAAhCA,KAAMC,EAA0B,EAA1BA,GAAIyC,EAAsB,EAAtBA,SAAaL,EAAS,kCAChDX,EAAUkB,uBACZ,SAAAhD,GACIwC,EAAkBC,EAAlBD,GACAxC,eAAC,EAASoC,EAAsBpC,EAAGI,EAAzBgC,GAAVpC,WAEJ,CAACyC,EAAOrC,EALZ,IAOA,OACI,oCACI,qBAAS0B,QAASA,IAF1B","file":"static/js/layer.page.a4bd280f.chunk.js","sourcesContent":["import React, { useState, useRef, useMemo } from 'react';\r\nimport {\r\n    P5,\r\n    Canvas,\r\n    Setup,\r\n    Draw,\r\n    Background,\r\n    Circle,\r\n    Layer,\r\n    Line,\r\n    useDraw,\r\n} from 'p5-react';\r\n\r\nconst SketchDraw = () => {\r\n    const lineY = useRef(0);\r\n    useDraw(p => {\r\n        lineY.current++;\r\n        if (lineY.current > p.height) lineY.current = 0;\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Background color={0} />\r\n            <Line\r\n                from={p => [0, lineY.current]}\r\n                to={p => [p.width, lineY.current]}\r\n                stroke={[255, 0, 0]}\r\n                strokeWeight={2}\r\n            />\r\n            <Layer id=\"layer\" autoClear={false}>\r\n                <Circle\r\n                    x={p => p.mouseX}\r\n                    y={p => p.mouseY}\r\n                    size={20}\r\n                    fill={255}\r\n                    noStroke\r\n                />\r\n            </Layer>\r\n        </>\r\n    );\r\n};\r\nexport default function LayerPage() {\r\n    const [debug, setDebug] = useState(false);\r\n    const canvasOptions = useMemo(\r\n        () => ({\r\n            clearOnDraw: true,\r\n            debug,\r\n            // frameRate: 1,\r\n        }),\r\n        [debug]\r\n    );\r\n    const toggleDebug = () => setDebug(d => !d);\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <button onClick={toggleDebug}>\r\n                    DEBUG: {debug ? 'ON' : 'OFF'}\r\n                </button>\r\n            </div>\r\n            <P5 options={canvasOptions} className=\"canvas\">\r\n                <Setup>\r\n                    <Canvas width={500} height={500} className=\"canvas\" />\r\n                    <Background color={0} />\r\n                </Setup>\r\n                <Draw>\r\n                    <SketchDraw />\r\n                </Draw>\r\n            </P5>\r\n        </>\r\n    );\r\n}\r\n","import { useContext, useRef, useEffect } from 'react';\r\nimport { P5RenderContext } from './RenderContext';\r\n\r\nexport const Command = ({ command, p }) => {\r\n    const renderContext = useContext(P5RenderContext);\r\n    const commandIndex = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const clear = renderContext.defineCommand(\r\n            command,\r\n            () => p || renderContext.p5Instance,\r\n            commandIndex.current\r\n        );\r\n        return () => {\r\n            commandIndex.current = clear();\r\n        };\r\n    }, [command, p, renderContext]);\r\n    return null;\r\n};\r\n","export const handleValueOrFunction = (p, ...values) => {\r\n    const returnValue = values.map(value =>\r\n        typeof value === 'function' ? value(p) : value\r\n    );\r\n\r\n    if (returnValue.length <= 1) return returnValue[0];\r\n    return returnValue;\r\n};\r\n","import { handleValueOrFunction } from './handleValueOrFunction';\r\n\r\nexport function handleCommonProps(props, p) {\r\n    const applyProp = propName => {\r\n        if (!props.hasOwnProperty(propName)) return;\r\n        const value = handleValueOrFunction(p, props[propName]);\r\n\r\n        if (Array.isArray(value)) p[propName](...value);\r\n        else p[propName](value);\r\n    };\r\n\r\n    if (props.noFill) p.noFill();\r\n    if (props.noStroke) p.noStroke();\r\n\r\n    applyProp('ellipseMode');\r\n    applyProp('rectMode');\r\n    applyProp('angleMode');\r\n    applyProp('colorMode');\r\n\r\n    applyProp('fill');\r\n    applyProp('stroke');\r\n\r\n    applyProp('strokeJoin');\r\n    applyProp('strokeCap');\r\n    applyProp('strokeWeight');\r\n\r\n    applyProp('translate');\r\n    applyProp('rotate');\r\n    applyProp('scale');\r\n    applyProp('shearX');\r\n    applyProp('shearY');\r\n    applyProp('applyMatrix');\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from './Command';\r\nimport { handleCommonProps } from './utils/handleCommonProps';\r\n\r\nexport function PushPop({ children, ...props }) {\r\n    const push = useCallback(\r\n        p => {\r\n            p.push();\r\n            handleCommonProps(props, p);\r\n        },\r\n        [props]\r\n    );\r\n\r\n    const pop = useCallback(p => {\r\n        p.pop();\r\n    }, []);\r\n    return (\r\n        <>\r\n            <Command command={push} />\r\n            {children}\r\n            <Command command={pop} />\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback, useContext, useRef } from 'react';\r\nimport { P5Context } from './P5';\r\nimport { Command } from './Command';\r\nimport { PushPop } from './PushPop';\r\n\r\nexport function Debug() {\r\n    const ctx = useContext(P5Context);\r\n    const frameRateHistory = useRef([]);\r\n\r\n    const displayDebugInfo = useCallback(\r\n        p => {\r\n            p.fill(0, 80);\r\n            p.noStroke();\r\n            p.rect(0, 0, 185, 95);\r\n\r\n            p.fill(255);\r\n            p.textFont('Courier');\r\n            p.textLeading(20);\r\n            const fr = Math.round(p.frameRate());\r\n            const avgFr =\r\n                frameRateHistory.current.reduce(\r\n                    (total, curr) => total + curr,\r\n                    0\r\n                ) / frameRateHistory.current.length;\r\n            frameRateHistory.current.push(fr);\r\n            if (fr > 200) fr.shift();\r\n            const text = `Current frame rate: ${fr}\r\nAverage frame rate: ${Math.round(avgFr)}\r\nSetup commands: ${ctx.getCommands().setup.length}\r\nDraw commands: ${ctx.getCommands().draw.length}\r\n        `;\r\n            p.text(text, 8, 18);\r\n        },\r\n        [ctx]\r\n    );\r\n\r\n    return (\r\n        <PushPop>\r\n            <Command command={displayDebugInfo} />\r\n        </PushPop>\r\n    );\r\n}\r\n","import React, { createContext, useContext } from 'react';\r\nimport { Debug } from './Debug';\r\nimport { SETUP, DRAW, P5Context } from './P5';\r\nexport const P5RenderContext = createContext(null);\r\n\r\nexport const RenderContextProvider = ({ step, children }) => {\r\n    const { p5Instance, defineCommandFactory, getOptions } = useContext(\r\n        P5Context\r\n    );\r\n    const api = {\r\n        defineCommand: defineCommandFactory(step),\r\n        rootP5Instance: p5Instance,\r\n        p5Instance,\r\n        getOptions,\r\n    };\r\n\r\n    if (!p5Instance) return null;\r\n\r\n    return (\r\n        <P5RenderContext.Provider value={api}>\r\n            {children}\r\n        </P5RenderContext.Provider>\r\n    );\r\n};\r\n\r\nexport const Setup = ({ children }) => {\r\n    return (\r\n        <RenderContextProvider step={SETUP}>{children}</RenderContextProvider>\r\n    );\r\n};\r\nexport const Draw = ({ children }) => {\r\n    const { getOptions } = useContext(P5Context);\r\n    return (\r\n        <RenderContextProvider step={DRAW}>\r\n            {children}\r\n            {getOptions().debug && <Debug />}\r\n        </RenderContextProvider>\r\n    );\r\n};\r\n","import React, {\r\n    useRef,\r\n    useMemo,\r\n    useState,\r\n    useEffect,\r\n    createContext,\r\n    useContext,\r\n} from 'react';\r\nimport p5 from 'p5';\r\nimport { P5RenderContext } from './RenderContext';\r\n\r\np5.disableFriendlyErrors = true;\r\nexport const SETUP = 'setup';\r\nexport const DRAW = 'draw';\r\nexport const PRELOAD = 'preload';\r\n\r\nexport const P5Context = createContext(null);\r\n\r\nexport const useP5 = () => {\r\n    const context = useContext(P5RenderContext);\r\n    return {\r\n        p: context.p5Instance,\r\n        root: context.rootP5Instance,\r\n        draw: context.defineCommand,\r\n    };\r\n};\r\n\r\nexport const useDraw = command => {\r\n    const { draw } = useP5();\r\n\r\n    useEffect(() => {\r\n        const clear = draw(command);\r\n        return () => clear();\r\n    }, [draw, command]);\r\n};\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    clearOnDraw: false,\r\n    frameRate: 60,\r\n    debug: false,\r\n};\r\n\r\nexport const P5 = ({ options, children, ...props }) => {\r\n    const [p5Instance, setP5Instance] = useState(null);\r\n    const __ready = useRef(false);\r\n    const canvasOptions = useMemo(() => ({ ...DEFAULT_OPTIONS, ...options }), [\r\n        options,\r\n    ]);\r\n    const commands = useRef({\r\n        [SETUP]: [],\r\n        [DRAW]: [],\r\n        [PRELOAD]: [],\r\n    });\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (p5Instance) p5Instance.remove();\r\n        };\r\n    }, [p5Instance]);\r\n\r\n    useEffect(() => {\r\n        if (!p5Instance) {\r\n            setP5Instance(\r\n                new p5(p => {\r\n                    p.__id = 'ROOT';\r\n\r\n                    p.setup = () => {\r\n                        p.frameRate(canvasOptions.frameRate);\r\n                        // Basically I don't understand why I need to do this...\r\n                        // When Loading the component containing the sketch asynchronously via React.lazy(),\r\n                        // the setup function is executed before the <Commands /> inside <Setup /> had time to define the commands\r\n                        // There is probably a better workaround, but this will do for now...\r\n                        setTimeout(() => {\r\n                            commands.current[SETUP].forEach(command =>\r\n                                command()\r\n                            );\r\n                            __ready.current = true;\r\n                        });\r\n                    };\r\n\r\n                    p.draw = () => {\r\n                        if (__ready.current !== true) return;\r\n                        if (canvasOptions.clearOnDraw) {\r\n                            p.clear();\r\n                        }\r\n                        commands.current[DRAW].forEach(command => {\r\n                            command();\r\n                        });\r\n                    };\r\n                })\r\n            );\r\n        }\r\n    }, [canvasOptions.clearOnDraw, canvasOptions.frameRate, p5Instance]);\r\n\r\n    const api = {\r\n        p5Instance,\r\n        getOptions: () => canvasOptions,\r\n        getCommands: () => commands.current,\r\n        defineCommandFactory: key => (command, ctx = p5Instance, idx) => {\r\n            if (typeof idx !== 'number') {\r\n                idx = commands.current[key].length;\r\n            }\r\n\r\n            const handler = () => {\r\n                return command(typeof ctx === 'function' ? ctx() : ctx);\r\n            };\r\n            handler.__type = command.__type;\r\n            if (commands.current[key].length <= 0) {\r\n                commands.current[key].push(handler);\r\n            } else {\r\n                commands.current[key].splice(idx, 0, handler);\r\n            }\r\n            return () => {\r\n                const index = commands.current[key].indexOf(handler);\r\n                commands.current[key] = commands.current[key].filter(\r\n                    c => c !== handler\r\n                );\r\n                return index;\r\n            };\r\n        },\r\n    };\r\n\r\n    return <P5Context.Provider value={api}>{children}</P5Context.Provider>;\r\n};\r\n","import React, {\r\n    useState,\r\n    useEffect,\r\n    useRef,\r\n    useContext,\r\n    useCallback,\r\n} from 'react';\r\nimport { Command } from './Command';\r\nimport { P5RenderContext } from './RenderContext';\r\nimport { handleValueOrFunction } from './utils/handleValueOrFunction';\r\nconst EMPTY_ARRAY = Object.freeze([]);\r\n\r\nexport function Layer({\r\n    autoClear = true,\r\n    children = null,\r\n    blendMode = 'BLEND',\r\n    opacity,\r\n    filters = EMPTY_ARRAY,\r\n    isStatic = false,\r\n    applyFunction,\r\n    x = 0,\r\n    y = 0,\r\n    width = p => p.width,\r\n    height = p => p.height,\r\n    id,\r\n}) {\r\n    const [layerImage, setLayerImage] = useState(null);\r\n    const pg = useRef(null);\r\n    const applyCallbacks = useRef([]);\r\n    const ctx = useContext(P5RenderContext);\r\n\r\n    useEffect(() => {\r\n        if (isStatic) {\r\n            setLayerImage(null);\r\n        }\r\n    }, [children, opacity, blendMode, isStatic]);\r\n\r\n    const api = {\r\n        ...ctx,\r\n        get p5Instance() {\r\n            return pg.current;\r\n        },\r\n    };\r\n\r\n    const applyLayer = useCallback(() => {\r\n        const p = ctx.p5Instance;\r\n        const doApply = content => {\r\n            p.blendMode(p[blendMode]);\r\n            // only tint if needed because it is a costly operation\r\n            if (opacity) {\r\n                p.tint(255, opacity);\r\n            }\r\n            p.image(\r\n                content,\r\n                handleValueOrFunction(p, x),\r\n                handleValueOrFunction(p, y),\r\n                handleValueOrFunction(p, width),\r\n                handleValueOrFunction(p, height)\r\n            );\r\n        };\r\n\r\n        if (layerImage && isStatic) {\r\n            doApply(layerImage);\r\n            return;\r\n        }\r\n        if (!pg.current || pg.current.width <= 0 || pg.current.height <= 0) {\r\n            return;\r\n        }\r\n\r\n        pg.current.mouseX = p.mouseX + handleValueOrFunction(p, x);\r\n        pg.current.mouseY = p.mouseY + handleValueOrFunction(p, y);\r\n\r\n        let contentToApply = pg.current;\r\n\r\n        if (applyCallbacks.current.length > 0) {\r\n            const copyParams = [0, 0, pg.current.width, pg.current.height];\r\n            contentToApply = p.createImage(pg.current.width, pg.current.height);\r\n            contentToApply.copy(pg.current, ...copyParams, ...copyParams);\r\n            applyCallbacks.current.forEach(cb =>\r\n                cb(pg.current, contentToApply)\r\n            );\r\n        }\r\n\r\n        if (applyFunction) applyFunction(pg.current);\r\n        else doApply(contentToApply);\r\n\r\n        if (isStatic) {\r\n            setLayerImage(contentToApply);\r\n        }\r\n    }, [\r\n        ctx.p5Instance,\r\n        layerImage,\r\n        isStatic,\r\n        applyFunction,\r\n        blendMode,\r\n        opacity,\r\n        x,\r\n        y,\r\n        width,\r\n        height,\r\n    ]);\r\n\r\n    const applyFilters = useCallback(() => {\r\n        if (!pg.current) return;\r\n        filters.forEach(filter => {\r\n            if (Array.isArray(filter)) {\r\n                pg.current.filter(...filter);\r\n            } else {\r\n                pg.current.filter(filter);\r\n            }\r\n        });\r\n    }, [filters]);\r\n\r\n    const applyAutoClear = useCallback(() => {\r\n        if (!pg.current) return;\r\n        pg.current.clear();\r\n    }, []);\r\n\r\n    const createLayer = useCallback(\r\n        p => {\r\n            if (!pg.current) {\r\n                pg.current = ctx.rootP5Instance.createGraphics(\r\n                    handleValueOrFunction(ctx.rootP5Instance, width),\r\n                    handleValueOrFunction(ctx.rootP5Instance, height)\r\n                );\r\n                pg.current.on = (event, cb) => {\r\n                    switch (event) {\r\n                        case 'apply':\r\n                            applyCallbacks.current.push(cb);\r\n                            return () => {\r\n                                applyCallbacks.current.splice(\r\n                                    applyCallbacks.current.indexOf(cb),\r\n                                    1\r\n                                );\r\n                            };\r\n                        default:\r\n                            console.error('Unknow layer event', event);\r\n                    }\r\n                };\r\n            }\r\n            pg.current.__isLayer = true;\r\n            pg.current.__id = id;\r\n        },\r\n        [ctx.rootP5Instance, height, id, width]\r\n    );\r\n\r\n    return (\r\n        <P5RenderContext.Provider value={api}>\r\n            <>\r\n                {!layerImage && <Command command={createLayer} />}\r\n                {!layerImage && autoClear && (\r\n                    <Command command={applyAutoClear} />\r\n                )}\r\n                {!layerImage && children}\r\n                {!layerImage && filters.length > 0 && (\r\n                    <Command command={applyFilters} />\r\n                )}\r\n                <Command command={applyLayer} />\r\n            </>\r\n        </P5RenderContext.Provider>\r\n    );\r\n}\r\n","import React, { useRef, useCallback, useContext } from 'react';\r\nimport { P5RenderContext } from './RenderContext';\r\nimport { Layer } from './Layer';\r\n\r\nexport function Mask({ id, children, ...props }) {\r\n    const ctx = useContext(P5RenderContext);\r\n    const mask = useRef(null);\r\n\r\n    const applyFunction = useCallback(\r\n        layer => {\r\n            const apply = (parentLayer, parentImg) => {\r\n                parentImg.mask(layer);\r\n            };\r\n            if (mask.current) mask.current();\r\n            mask.current = ctx.p5Instance.on('apply', apply);\r\n        },\r\n        [ctx.p5Instance]\r\n    );\r\n\r\n    return (\r\n        <Layer id={id} applyFunction={applyFunction} {...props}>\r\n            {children}\r\n        </Layer>\r\n    );\r\n}\r\n","import React, { useRef, useCallback, useContext } from 'react';\r\nimport { Command } from './Command';\r\nimport { P5RenderContext } from './RenderContext';\r\n\r\nexport function Canvas({\r\n    width,\r\n    height,\r\n    renderer = 'P2D',\r\n    children,\r\n    ...props\r\n}) {\r\n    const { rootP5Instance: rp } = useContext(P5RenderContext);\r\n    const canvasContainerRef = useRef(null);\r\n    const command = useCallback(() => {\r\n        const canvas = rp.createCanvas(width, height, renderer);\r\n        console.log('create canvas');\r\n        canvas.parent(canvasContainerRef.current);\r\n    }, [height, renderer, rp, width]);\r\n\r\n    return (\r\n        <>\r\n            <div ref={canvasContainerRef} {...props} />\r\n            <Command command={command}>{children}</Command>\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Rectangle({ p, x, y, width, height, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.rect(...handleValueOrFunction(p, x, y, width, height));\r\n        },\r\n        [props, x, y, width, height]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback, useContext } from 'react';\r\nimport { Command } from './Command';\r\nimport { P5RenderContext } from './RenderContext';\r\nimport { Rectangle } from './shapes/Rectangle';\r\nimport { PushPop } from './PushPop';\r\nimport { handleCommonProps } from './utils/handleCommonProps';\r\nimport { handleValueOrFunction } from './utils/handleValueOrFunction';\r\nimport p5 from 'p5';\r\n\r\nconst FullCanvasRectangle = () => (\r\n    <Rectangle\r\n        x={0}\r\n        y={0}\r\n        width={p => p.width}\r\n        height={p => p.height}\r\n        noStroke\r\n    />\r\n);\r\nexport function LinearGradient({\r\n    x = 0,\r\n    y = 0,\r\n    width,\r\n    height,\r\n    colors = ['black', 'white'],\r\n    angle,\r\n    angleMode,\r\n    children,\r\n    ...props\r\n}) {\r\n    const { rootP5Instance: rp } = useContext(P5RenderContext);\r\n\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            const params = {\r\n                x: handleValueOrFunction(rp, x),\r\n                y: handleValueOrFunction(rp, y),\r\n                width: handleValueOrFunction(rp, width) || p.width,\r\n                height: handleValueOrFunction(rp, height) || p.height,\r\n                angle: handleValueOrFunction(rp, angle) || 0,\r\n                angleMode: handleValueOrFunction(rp, angleMode) || p.RADIANS,\r\n                colors: handleValueOrFunction(rp, ...colors),\r\n            };\r\n\r\n            if (params.angleMode !== p.RADIANS) {\r\n                params.angle = p.radians(params.angle);\r\n            }\r\n            p.push();\r\n            p.angleMode(p.DEGREES);\r\n            let angleInDegrees = p.degrees(params.angle) % 360;\r\n            let endVectorAngle = p.degrees(params.angle) % 180;\r\n\r\n            if (endVectorAngle > 45 && endVectorAngle <= 90) {\r\n                endVectorAngle = 90 - endVectorAngle;\r\n            } else if (endVectorAngle > 90 && endVectorAngle <= 135) {\r\n                endVectorAngle -= 90;\r\n            } else if (endVectorAngle > 135 && endVectorAngle <= 180) {\r\n                endVectorAngle = 90 - (endVectorAngle - 90);\r\n            }\r\n\r\n            const startVector = p.createVector(params.x, params.y);\r\n            const endVector = p5.Vector.fromAngle(params.angle);\r\n\r\n            endVector.setMag(params.width / p.sin(90 - endVectorAngle));\r\n            if (angleInDegrees > 270) {\r\n                startVector.y += params.height;\r\n                endVector.y += params.height;\r\n            } else if (angleInDegrees > 180) {\r\n                startVector.x += params.width;\r\n                endVector.x += params.width;\r\n                startVector.y += params.height;\r\n                endVector.y += params.height;\r\n            } else if (angleInDegrees > 90) {\r\n                startVector.x += params.width;\r\n                endVector.x += params.width;\r\n            }\r\n            p.pop();\r\n            const gradient = p.drawingContext.createLinearGradient(\r\n                startVector.x,\r\n                startVector.y,\r\n                params.x + endVector.x,\r\n                params.y + endVector.y\r\n            );\r\n            params.colors.forEach((color, i) => {\r\n                const stop = i / (params.colors.length - 1);\r\n                gradient.addColorStop(stop, p.color(color).toString());\r\n            });\r\n            p.drawingContext.fillStyle = gradient;\r\n\r\n            // UNCOMMENT TO DEBUG\r\n            // p.push();\r\n            // p.rect(0, 0, p.width, p.height);\r\n            // p.fill(0);\r\n            // p.text(`angle: ${Math.round(p.degrees(params.angle))}`, 15, 15);\r\n            // p.noFill();\r\n            // p.stroke(128);\r\n            // p.rect(params.x, params.y, params.width, params.height);\r\n            // p.rectMode(p.CORNERS);\r\n            // p.stroke(255);\r\n            // p.line(\r\n            //     startVector.x,\r\n            //     startVector.y,\r\n            //     params.x + endVector.x,\r\n            //     params.y + endVector.y\r\n            // );\r\n            // p.pop();\r\n        },\r\n        [props, rp, x, y, width, height, angle, angleMode, colors]\r\n    );\r\n\r\n    return (\r\n        <PushPop>\r\n            <Command command={command} />\r\n            {children || <FullCanvasRectangle />}\r\n        </PushPop>\r\n    );\r\n}\r\n","import React, { useRef, useState, useEffect, useCallback } from 'react';\r\nimport { Command } from './Command';\r\nimport { useP5 } from './P5';\r\n\r\nexport function Body({ model, children }) {\r\n    const { p } = useP5();\r\n    const _model = useRef(null);\r\n    const [objectState, setObjectState] = useState(null);\r\n\r\n    const command = useCallback(\r\n        p => {\r\n            if (objectState) {\r\n                _model.current.update(p);\r\n                setObjectState({ state: _model.current });\r\n            }\r\n        },\r\n        [objectState]\r\n    );\r\n\r\n    useEffect(() => {\r\n        // We need to wait for the next tick before initializing the model\r\n        // This is because it could happend that setup commands such as createCanvas have not been run yet, potentially forwarding wrong values into the model\r\n        if (!_model.current) {\r\n            setTimeout(() => {\r\n                _model.current = model(p, _model.current);\r\n                setObjectState({ state: _model.current });\r\n            });\r\n        } else {\r\n            _model.current = model(p, _model.current);\r\n            setObjectState({ state: _model.current });\r\n        }\r\n    }, [model, p]);\r\n\r\n    return (\r\n        <>\r\n            <Command command={command}></Command>\r\n            {objectState && children(objectState.state)}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Arc({\r\n    p,\r\n    x,\r\n    y,\r\n    height,\r\n    width,\r\n    start,\r\n    stop,\r\n    children,\r\n    ...props\r\n}) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.arc(\r\n                ...handleValueOrFunction(p, x, y, width, height, start, stop)\r\n            );\r\n        },\r\n        [props, x, y, width, height, start, stop]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Background({ color, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            p.background(handleValueOrFunction(p, color));\r\n        },\r\n        [color]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Circle({ p, x, y, size, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.circle(...handleValueOrFunction(p, x, y, size));\r\n        },\r\n        [props, x, y, size]\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { Command } from '../Command';\r\nimport { handleCommonProps } from '../utils/handleCommonProps';\r\nimport { handleValueOrFunction } from '../utils/handleValueOrFunction';\r\n\r\nexport function Line({ p, from, to, children, ...props }) {\r\n    const command = useCallback(\r\n        p => {\r\n            handleCommonProps(props, p);\r\n            p.line(...handleValueOrFunction(p, from, to).flat());\r\n        },\r\n        [props, from, to]\r\n    );\r\n    return (\r\n        <>\r\n            <Command command={command} />\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n"],"sourceRoot":""}